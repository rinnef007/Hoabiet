
var bodyDom = jQuery("#__nuxt")
var bodyDom1 = jQuery("#__nuxt")
var bodyDom2 = jQuery("#__nuxt")
var bodyDom3 = jQuery("#__nuxt .layout");



var MessageContent = `<div class="vfm vfm--fixed vfm--inset flex justify-center items-center" role="dialog" aria-modal="true" style="z-index: 1000;display:none" id="userInfo">
    <div class="vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none" aria-hidden="true"></div>
    <div class="vfm__content vfm--outline-none relative flex flex-col w-[400px] max-h-[90vh] m-2 p-4  lg:p-10 rounded-2xl overflow-y-auto"
        tabindex="0" style="background-color:#FFF4F4">
        <button class="absolute top-5 right-5 flex text-black z-[11]" onclick="loginClose()">
            <svg data-v-b323f4c4=""
                xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="none"
                class="icon">
                <path fill="currentColor"
                    d="M12.2 3.807a.664.664 0 0 0-.94 0L8 7.06 4.74 3.8a.664.664 0 1 0-.94.94L7.06 8 3.8 11.26a.664.664 0 1 0 .94.94L8 8.94l3.26 3.26a.664.664 0 1 0 .94-.94L8.94 8l3.26-3.26a.668.668 0 0 0 0-.933Z">
                </path>
            </svg></button><!---->
            <div class="overflow-y-auto">
                <div class="flex gap-[30px]"><button type="button"  data-translate-key="register"
                        class="text-xl font-semibold leading-5 text-[#838383] uppercase" id="zctitle" onclick="zc()"></button><button
                        type="button" data-translate-key="login"
                        class="text-xl font-semibold leading-5 text-[#838383] uppercase " id="dltitle" onclick="user()" ></button>
                </div>
                
                <div class="flex gap-2.5 mt-4 md:mt-[30px]" id="kjdl">
                    <button type="button" class="flex flex-col items-center w-full md:w-[100px] py-5 px-2.5 border rounded-lg disabled:opacity-10" >
                        <div id="googleSignInBtn">

                        </div>
                        <span class="mt-3 text-sm font-medium text-black ">Google</span></button>
                        <button type="button" class="flex flex-col items-center w-full md:w-[100px] py-5 px-2.5 border rounded-lg disabled:opacity-10" onclick="loginWithFacebook()">
                        <svg data-v-b323f4c4="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="icon" width="40px" height="40px" viewBox="0 0 256 256">
                            <path fill="#1877F2" d="M256 128C256 57.308 198.692 0 128 0S0 57.308 0 128c0 63.888 46.808 116.843 108 126.445V165H75.5v-37H108V99.8c0-32.08 19.11-49.8 48.348-49.8C170.352 50 185 52.5 185 52.5V84h-16.14C152.959 84 148 93.867 148 103.99V128h35.5l-5.675 37H148v89.445c61.192-9.602 108-62.556 108-126.445">
                            </path>
                            <path fill="#FFF"
                                d="m177.825 165l5.675-37H148v-24.01C148 93.866 152.959 84 168.86 84H185V52.5S170.352 50 156.347 50C127.11 50 108 67.72 108 99.8V128H75.5v37H108v89.445A129 129 0 0 0 128 256a129 129 0 0 0 20-1.555V165z">
                            </path>
                        </svg><span class="mt-3 text-sm font-medium text-black ">Facebook</span>
                        </button>

                        </div>
                <div style="display:none" id="loginInfo">
                    <div class="flex flex-col gap-3 mt-[20px] md:mt-[30px]">
                        <div style="display:flex">
                            <div class="" style="display:flex;color:#7c1820" onclick="logintab(2)" id="typeLoginTwoClass">
                                 <img src="../image/phone.svg" style="width:32px" id="loginPhoneSvg">
                                    <span style="margin-left: 10px;line-height: 32px;">`+ language['139'] + `</span>
                            </div>
                            <div  class="" style="margin-left:10px;display:flex;" onclick="logintab(1)" id="typeLoginOneClass">
                                <img src="../image/email_z.svg" style="width:32px" id="loginEmaliSvg">
                                <span style="margin-left: 10px;line-height: 32px;">`+ language['66'] + `</span>
                            </div>
                        </div>
                        <div data-v-d9e5cc92="" id="loginEmailShow" style="display:none">
                            <div data-v-d9e5cc92="" class="relative">
                                <input data-v-d9e5cc92="" name="email" data-translate-key="input emial" id="email" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm   focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                            </div>
                            <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" data-translate-key="email error" id="emailLoginText"></p>
                        </div>
                        <div data-v-d9e5cc92="" id="loginPhoneShow">
                            <div data-v-d9e5cc92="" class="relative" style="display:flex;align-items:center">
                                <div style="color: #7c1820;margin-right: 10px;">+84</div>
                                <input data-v-d9e5cc92="" name="phone" id="phone" data-translate-key="input phone" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                            </div>
                            <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" data-translate-key="input phone" id="phoneLoginText"></p>
                        </div>
                                               
                <div data-v-d9e5cc92="" id="yzm_box_wrap">
                    <div data-v-d9e5cc92="" class="relative">
                        <input data-v-d9e5cc92="" data-translate-key="input code" name="foryz" id="foryz" type="foryz" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                             <canvas id="forcanvas" width="100" height="50" style="position: absolute;top: 8%;right: 1%;" data-code="c4wq"></canvas>
                    </div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="" id="foryzText"></p>
                    <style>
                        .code {
            				padding-top: 50px;
            				width: 400px;
            				margin: 0 auto;
            			}
                                
            			.input-val {
            				width: 295px;
            				background: #ffffff;
            				height: 2.8rem;
            				padding: 0 2%;
            				border-radius: 5px;
            				border: none;
            				border: 1px solid rgba(0, 0, 0, .2);
            				font-size: 1.0625rem;
            			}
                                
            			#forcanvas {
            				float: right;
            				display: inline-block;
            				border: 1px solid #ccc;
            				border-radius: 5px;
            				cursor: pointer;
            			}
        
            			.btn {
            				width: 100px;
            				height: 40px;
            				background: #f1f1f1;
            				border: 1px solid #ccc;
            				border-radius: 5px;
            				margin: 20px auto 0;
            				display: block;
            				font-size: 1.2rem;
            				color: #e22e1c;
            				cursor: pointer;
            			}
                    </style>
                </div> 
<div data-v-d9e5cc92="" id="ForCodeShow2">
    <div data-v-d9e5cc92="" class="relative">
        <input data-v-d9e5cc92="" name="forcode" id="forcode2" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm focus:border-[#7c1820] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300" data-translate-key="input phone code">
        <div class="text142" style="color: #fff;padding: 3px;background-color: #7c1820;border-radius: 8px;width: 50px;text-align: center;position: absolute;top: 25%;right: 3%;" onclick="forCode2()" id="ForcodeSubmit2"  data-translate-key="send"></div>
    </div>
    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="codeForText2"></p>
</div>

                    <div data-v-d9e5cc92="" id="password_box_wrap"  style="display: none"><!---->
                        <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="password"
                                id="password" type="password" placeholder="" data-translate-key="input password"
                                class="w-full h-[60px] p-5 bg-transparent border borde-black/20 rounded-lg text-sm  focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><button
                                data-v-d9e5cc92="" type="button"
                                class="absolute top-5 right-4 w-6 h-6 p-1 text-[0px] text-[#838383] hover:text-black" onclick="eye(1)" id="eyebutton1">
                                    <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="lpeye">
                                    <path   fill="currentColor"
                                        d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                    </path>
                                    
                    
                                </svg>
                                </button><!----></div>
                        <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="passwordLoginText"></p>
                    </div>
                    </div>
                    <div class="flex justify-end mt-3" id="forgot_box_wrap"><button type="button" class="text-xs text-[#838383] text29" data-translate-key="forget" onclick="forgot()"></button></div>
                    <div class="mt-5" id="emailLoginSubmit" style="display:none">
                        <button style="background-color:#7c1820"  class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300  bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none text-white  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full" data-translate-key="login" onclick="submitLogin()"><!---->
                            <div class="inline-flex items-center text16" ></div><!---->
                        </button>
                    </div>
                    <div class="mt-5" id="phoneLoginSubmit">
                        <button  style="background-color:#7c1820" class="flex items-center justify-center px-5 py-2 text-white border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300  bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full" data-translate-key="login" onclick="submitPhoneLogin2()"><!---->
                            <div class="inline-flex items-center text16" ></div><!---->
                        </button>
                    </div>
                </div>
                </div>  
                 
                 
                 <div style="display:none" id="zcInfo">
                    <div class="flex flex-col gap-3 mt-[20px] md:mt-[30px]">
                            <div style="display:flex">
                                <div  class="" style="display:flex;color:#7c1820" onclick="zctab(1)" id="typeZcOneClass">
                                    <img src="../image/email_z.svg" style="width:32px" id="ZcEmaliSvg">
                                    <span style="margin-left: 10px;line-height: 32px;">`+ language['66'] + `</span>
                                </div>
                                <div class="" style="margin-left:10px;display:flex;display: none;" onclick="zctab(2)" id="typeZcTwoClass">
                                     <img src="../image/phone.svg" style="width:32px" id="ZcPhoneSvg">
                                        <span style="margin-left: 10px;line-height: 32px;">`+ language['139'] + `</span>
                                </div>
                            </div>
                            <div data-v-d9e5cc92=""><!---->
                                <div data-v-d9e5cc92="" class="relative"><!---->
                                <input data-v-d9e5cc92="" name="name" data-translate-key="input username" id="name" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><!----><!---->
                                </div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" data-translate-key="input username" id="nameText"></p>
                            </div>
                            <div data-v-d9e5cc92="" id="ZcEmailShow"><!---->
                                <div data-v-d9e5cc92="" class="relative"><!---->
                                <input data-v-d9e5cc92="" name="email" id="zcemail" type="email" placeholder="" data-translate-key="input emial"
                                        class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm   focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><!----><!---->
                                </div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="emailZcText"></p>
                            </div>
                            <div data-v-d9e5cc92="" id="ZcPhoneShow" style="display:none">
                                <div data-v-d9e5cc92="" class="relative" style="display:flex;align-items:center">
                                    <div style="color:#7c1820;margin-right:10px">+84</div>
                                    <input data-v-d9e5cc92="" name="phone" id="zcphone" data-translate-key="input phone" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                                </div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="phoneZcText"></p>
                            </div>
                                                        <div data-v-d9e5cc92=""><!---->
                                <div data-v-d9e5cc92="" class="relative">
                                    <input data-v-d9e5cc92="" name="password"
                                        id="zcyz" type="zcyz" placeholder="" data-translate-key="input code"
                                        class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm   focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                                         <canvas id="canvas" width="100" height="43" style="position: absolute;top: 8%;right: 1%;"></canvas>
                                </div>

                                  
                                    <style>
                                    .code {
                        				padding-top: 50px;
                        				width: 400px;
                        				margin: 0 auto;
                        			}
                        
                        			.input-val {
                        				width: 295px;
                        				background: #ffffff;
                        				height: 2.8rem;
                        				padding: 0 2%;
                        				border-radius: 5px;
                        				border: none;
                        				border: 1px solid rgba(0, 0, 0, .2);
                        				font-size: 1.0625rem;
                        			}
                        
                        			#canvas {
                        				float: right;
                        				display: inline-block;
                        				border: 1px solid #ccc;
                        				border-radius: 5px;
                        				cursor: pointer;
                        			}
                        
                        			.btn {
                        				width: 100px;
                        				height: 40px;
                        				background: #f1f1f1;
                        				border: 1px solid #ccc;
                        				border-radius: 5px;
                        				margin: 20px auto 0;
                        				display: block;
                        				font-size: 1.2rem;
                        				color: #e22e1c;
                        				cursor: pointer;
                        			}
                                    </style>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="zcyzText"></p>
                            </div>
                            <div data-v-d9e5cc92="" id="ZcCodeShow" style="display:none">
                                <div data-v-d9e5cc92="" class="relative">
                                    <input data-v-d9e5cc92="" name="code" data-translate-key="input phone code" id="zccode" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                                    <div class="text142"   data-translate-key="send"  style="  color: #fff;padding: 3px;background-color: #7c1820;border-radius: 8px;width: 50px;text-align: center;position: absolute;top: 25%;right: 3%;" onclick="zcCode()" id="ZccodeSubmit"></div>
                                </div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="codeZcText"></p>
                            </div>

                            <div data-v-d9e5cc92=""><!---->
                                <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="password"
                                        id="passwords" type="password" placeholder="" data-translate-key="input password"
                                        class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><button
                                        data-v-d9e5cc92="" type="button"
                                        class="absolute top-5 right-4 w-6 h-6 p-1 text-[0px] text-[#838383] hover:text-black" onclick="eye(2)" id="eyebutton2">
                                            <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="peye">
                                            <path   fill="currentColor"
                                                d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                            </path>
                                            
                           
                                        </svg>
                                        </button><!----></div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="zcpasswordText"></p>
                            </div>
                            <div data-v-d9e5cc92=""><!---->
                                <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="password"
                                        id="qpasswords" type="password" placeholder="" data-translate-key="input password"
                                        class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><button
                                        data-v-d9e5cc92="" type="button"
                                        class="absolute top-5 right-4 w-6 h-6 p-1 text-[0px] text-[#838383] hover:text-black" onclick="eye(3)" id="eyebutton3"><svg
                                            data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg"
                                            width="16px" height="16px" fill="none" class="icon" id="qpeye">
                                            <path fill="currentColor"
                                                d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                            </path>
                                        </svg></button><!---->
                                </div>
                                <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="qpasswordsText"></p>
                            </div>
                    <div class="flex flex-col gap-3 mt-[20px] md:mt-[30px]">
                            <div>
                                <div class="flex items-start">
                                    <div class="relative flex">
                                        <input type="checkbox" class="peer w-4 h-4 border border-[#ebebeb]  rounded checked:bg-[#FFC701] checked:border-[#FFC701] appearance-none focus:outline-none transition-colors duration-300 cursor-pointer" id="like">
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg" width="12" height="9" fill="none"
                                            class="absolute top-1 left-[2px] opacity-0 peer-checked:opacity-100 transition-opacity duration-300 pointer-events-none">
                                            <path stroke="#fff" stroke-width="2" d="m1 3 4 4 6-6"></path>
                                        </svg></div><span class="ml-3 text-[11px] leading-4 text-[#838383] text99" data-translate-key="agree1"></span>
                                </div>
                                <p class="mt-1.5 pl-7 text-xs text-[#FF0000]" style="display: none;" id="likeMessage"></p>
                            </div>
                            <div>
                                <div class="flex items-start">
                                    <div class="relative flex">
                                        <input type="checkbox" class="peer w-4 h-4 border border-[#ebebeb] hover:border-[#FFC701] rounded checked:bg-[#FFC701] checked:border-[#FFC701] appearance-none focus:outline-none transition-colors duration-300 cursor-pointer" id="by"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="12" height="9" fill="none"
                                            class="absolute top-1 left-[2px] opacity-0 peer-checked:opacity-100 transition-opacity duration-300 pointer-events-none">
                                            <path stroke="#fff" stroke-width="2" d="m1 3 4 4 6-6"></path>
                                        </svg></div><span class="ml-3 text-[11px] leading-4 text-[#838383] text100" data-translate-key="agree2"></span>
                                </div>
                                <p class="mt-1.5 pl-7 text-xs text-[#FF0000]" style="display: none;" id="byMessage"></p>
                            </div>
                        </div>
                    <div class="mt-5">
                        <button style="background-color:#7c1820" class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300 text-white bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full" onclick="zcSubmit()" id="zcStyle">
                            <div class="inline-flex items-center text17" data-translate-key="register"></div>
                        </button>
                        <button style="background-color:#7c1820;display:none" class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300 text-white bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full" onclick="zcPhoneSubmit()" id="zcPhoneStyle">
                            <div class="inline-flex items-center text17" data-translate-key="register"></div>
                        </button>
                    </div>
                </div>
                 
            </div>
    </div>
</div>

<div class="Toastify1" style="display:none"><div class="Toastify__toast-container Toastify__toast-container--top-right " id="top-right" data-v-app=""><div id="1dhn8a5" class="Toastify__toast Toastify__toast-theme--light Toastify__toast--success"><div role="alert" class="Toastify__toast-body "><div class="Toastify__toast-icon Toastify--animate-icon Toastify__zoom-enter"><svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--toastify-icon-color-success)"><path d="M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"></path></svg></div><div data-testid="toast-content" class="text102"></div></div><button class="Toastify__close-button Toastify__close-button--light" type="button" aria-label="close"><svg aria-hidden="true" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"></path></svg></button><!----><div role="progressbar" aria-hidden="false" aria-label="notification timer" class="Toastify__progress-bar Toastify__progress-bar--animated Toastify__progress-bar-theme--light Toastify__progress-bar--success" style="animation-duration: 2000ms; animation-play-state: paused; opacity: 1; transform: none;"></div></div></div>
</div>


<div class="Toastify2" style="display:none"><div class="Toastify__toast-container Toastify__toast-container--top-right " id="top-right" data-v-app=""><div id="zam7f1f" class="Toastify__toast Toastify__toast-theme--light Toastify__toast--error"><div role="alert" class="Toastify__toast-body "><div class="Toastify__toast-icon Toastify--animate-icon Toastify__zoom-enter"><svg viewBox="0 0 24 24" width="100%" height="100%" fill="var(--toastify-icon-color-error)"><path d="M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"></path></svg></div><div data-testid="toast-content" id="messageContent"></div></div><button class="Toastify__close-button Toastify__close-button--light" type="button" aria-label="close"><svg aria-hidden="true" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"></path></svg></button><!----><div role="progressbar" aria-hidden="false" aria-label="notification timer" class="Toastify__progress-bar Toastify__progress-bar--animated Toastify__progress-bar-theme--light Toastify__progress-bar--error" style="animation-duration: 2000ms; animation-play-state: paused; opacity: 1; transform: none;"></div></div></div>
</div>
<div class="vfm vfm--fixed vfm--inset flex justify-center items-center" role="dialog" aria-modal="true" style="z-index: 1004;display:none" id="forget">
    <div class="vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none" aria-hidden="true" ></div>
        <div style="background-color:#fef4f3" class="vfm__content vfm--outline-none relative flex flex-col w-[400px] max-h-[90vh] m-2 p-4  lg:p-10  rounded-2xl overflow-y-auto"
            tabindex="0"><button class="absolute top-5 right-5 flex text-black text-white z-[11]" onclick="forClose()"><svg
                    data-v-b323f4c4="" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"
                    fill="none" class="icon" style="color:#333">
                    <path fill="currentColor"
                        d="M12.2 3.807a.664.664 0 0 0-.94 0L8 7.06 4.74 3.8a.664.664 0 1 0-.94.94L7.06 8 3.8 11.26a.664.664 0 1 0 .94.94L8 8.94l3.26 3.26a.664.664 0 1 0 .94-.94L8.94 8l3.26-3.26a.668.668 0 0 0 0-.933Z">
                    </path>
                </svg></button><!---->
            <div class="flex flex-col gap-3 mt-[20px] md:mt-[30px]">
                <div data-v-d9e5cc92="" id="ForEmailShow"><!---->
                    <div data-v-d9e5cc92="" class="relative"><!----> 
                        <input data-v-d9e5cc92="" name="email" id="foremail" type="text" placeholder="" data-translate-key="input emial"
                            class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><!----><!---->
                    </div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;"
                        id="foremailText"></p>
                </div>
                <div data-v-d9e5cc92="" id="ForPhoneShow" style="display:none" ><!---->
                    <div data-v-d9e5cc92="" class="relative" style="display:flex;align-items:center">
                        <div style="color:#333;margin-right:10px">+84</div>
                        <input data-v-d9e5cc92="" name="forphone" id="forphone" type="text" placeholder="" data-translate-key="input phone"
                            class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><!----><!---->
                    </div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;"
                        id="forphoneText"></p>
                </div>
                <div data-v-d9e5cc92="">
                    <div data-v-d9e5cc92="" class="relative">
                        <input data-v-d9e5cc92="" data-translate-key="input code" name="foryz" id="foryz2" type="foryz" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300">
                             <canvas id="forcanvas2" width="100" height="50" style="position: absolute;top: 8%;right: 1%;" data-code="c4wq"></canvas>
                    </div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="" id="foryzText2"></p>
                    <style>
                        .code {
            				padding-top: 50px;
            				width: 400px;
            				margin: 0 auto;
            			}
                                
            			.input-val {
            				width: 295px;
            				background: #ffffff;
            				height: 2.8rem;
            				padding: 0 2%;
            				border-radius: 5px;
            				border: none;
            				border: 1px solid rgba(0, 0, 0, .2);
            				font-size: 1.0625rem;
            			}
                                
            			#forcanvas2 {
            				float: right;
            				display: inline-block;
            				border: 1px solid #ccc;
            				border-radius: 5px;
            				cursor: pointer;
            			}
        
            			.btn {
            				width: 100px;
            				height: 40px;
            				background: #f1f1f1;
            				border: 1px solid #ccc;
            				border-radius: 5px;
            				margin: 20px auto 0;
            				display: block;
            				font-size: 1.2rem;
            				color: #e22e1c;
            				cursor: pointer;
            			}
                    </style>
                </div>
                <div data-v-d9e5cc92="" id="ForCodeShow" style="display:none">
                    <div data-v-d9e5cc92="" class="relative">
                        <input data-v-d9e5cc92="" name="forcode" id="forcode" type="text" placeholder="" class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm focus:border-[#7c1820] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300" data-translate-key="input phone code">
                        <div class="text142" style="color: #fff;padding: 3px;background-color: #7c1820;border-radius: 8px;width: 50px;text-align: center;position: absolute;top: 25%;right: 3%;" onclick="forCode()" id="ForcodeSubmit"  data-translate-key="send"></div>
                    </div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;" id="codeForText"></p>
                </div>
                <div data-v-d9e5cc92=""><!---->
                    <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="password"
                            id="forpassword" type="password" placeholder="" data-translate-key="input password"
                            class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><button
                            data-v-d9e5cc92="" type="button"
                            class="absolute top-5 right-4 w-6 h-6 p-1 text-[0px] text-[#838383] hover:text-black"
                            onclick="eye(4)" id="eyebutton4">
                            <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px"
                                height="16px" fill="none" class="icon" id="forpeye">
                                <path fill="currentColor"
                                    d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                </path>
    
    
                            </svg>
                        </button><!----></div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;"
                        id="forpasswordText"></p>
                </div>
                <div data-v-d9e5cc92=""><!---->
                    <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="password"
                            id="forqpassword" type="password" placeholder="" data-translate-key="input password"
                            class="w-full h-[60px] p-5 bg-transparent border border-black/20 rounded-lg text-sm  focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><button
                            data-v-d9e5cc92="" type="button"
                            class="absolute top-5 right-4 w-6 h-6 p-1 text-[0px] text-[#838383] hover:text-black"
                            onclick="eye(5)" id="eyebutton5"><svg data-v-b323f4c4="" data-v-d9e5cc92=""
                                xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon"
                                id="forqpeye">
                                <path fill="currentColor"
                                    d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                </path>
                            </svg></button><!----></div>
                    <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;"
                        id="forqpasswordsText"></p>
                </div>
            <div class="mt-5">
                <button type="submit" style="background-color:#7c1820" class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300 text-white bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full"
                    onclick="forsubmit()" id="forStyle">
                    <div class="inline-flex items-center text19" data-translate-key="submit"></div>
                </button>
                <button type="submit" style="background-color:#7c1820" class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300 text-white bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383] py-[1.125rem] text-base w-full"
                    onclick="forPhonesubmit()" id="forPhoneStyle" style="display:none">
                    <div class="inline-flex items-center text19" data-translate-key="submit"></div>
                </button>
            </div>
        </div>
    </div>
            
        </div>
    </div>
</div>





<div class="vfm vfm--fixed vfm--inset flex justify-center items-center" role="dialog" aria-modal="true" style="z-index: 1000;display:none" id="payType">
    <div class="vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none" aria-hidden="true"></div>
    <div class="vfm__content vfm--outline-none deposit-modal blackfriday-modal relative flex flex-col w-[1000px] max-h-[90vh] md:max-h-[700px] m-2 p-4  lg:p-8 bg-[#111111] rounded-2xl overflow-y-auto overflow-x-hidden"
        tabindex="0"><button class="absolute top-5 right-5 flex text-black text-white z-[11]" onclick="payTypeClose()"><svg data-v-b323f4c4=""
                xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="none"
                class="icon">
                <path fill="currentColor"
                    d="M12.2 3.807a.664.664 0 0 0-.94 0L8 7.06 4.74 3.8a.664.664 0 1 0-.94.94L7.06 8 3.8 11.26a.664.664 0 1 0 .94.94L8 8.94l3.26 3.26a.664.664 0 1 0 .94-.94L8.94 8l3.26-3.26a.668.668 0 0 0 0-.933Z">
                </path>
            </svg></button><!---->
        <div class="relative z-10"><!---->
            <h3 class="mb-8 text-xl text-center font-semibold leading-5 text-black text-white uppercase text32"></h3>
        </div>
        <div class="relative grid md:grid-cols-2 gap-3 z-10">
            <div>
                <div class="grid md:grid-cols-2 gap-3" id="payTypeContent">
                </div>
            </div>
            <div class="overflow-y-auto"><!---->
                <div class="method-item p-5 bg-white !bg-[#2E2E2E] rounded-lg hidden md:block md:mt-4"><label
                        class="flex mb-2 text-xs font-semibold text-white uppercase"> Voucher <button type="button"
                            class="flex ml-1.5 text-white/50 hover:text-black hover:text-white transition-colors duration-300"><svg
                                data-v-b323f4c4="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px"
                                fill="none" class="icon">
                                <path fill="currentColor"
                                    d="M8 1.333A6.67 6.67 0 0 0 1.333 8 6.669 6.669 0 0 0 8 14.667 6.669 6.669 0 0 0 14.666 8 6.669 6.669 0 0 0 8 1.333Zm.666 11.334H7.333v-1.333h1.333v1.333Zm1.38-5.167-.6.614c-.48.486-.78.886-.78 1.886H7.333v-.333c0-.733.3-1.4.78-1.887l.827-.84c.246-.24.393-.573.393-.94 0-.733-.6-1.333-1.333-1.333-.734 0-1.334.6-1.334 1.333H5.333a2.666 2.666 0 1 1 5.333 0c0 .587-.24 1.12-.62 1.5Z">
                                </path>
                            </svg></button></label>
                    <div class="relative">
                        <div data-v-d9e5cc92=""><!---->
                            <div data-v-d9e5cc92="" class="relative"><!----><input data-v-d9e5cc92="" name="voucher"
                                    id="voucher" type="text" placeholder="Enter voucher"
                                    class="w-full h-[60px] p-5 bg-transparent border border-white/20 rounded-lg text-sm text-white focus:border-[#FFC701] focus:outline-none disabled:text-[#838383] disabled:bg-[#373737] overflow-ellipsis transition-colors duration-300"><!----><!---->
                            </div>
                            <p data-v-d9e5cc92="" class="mt-1.5 pl-5 text-xs text-[#FF0000]" style="display: none;"></p>
                        </div>
                        <div class="absolute top-1/2 right-[10px] -translate-y-1/2 flex"><button type="button"
                                class="flex items-center justify-center px-5 py-2 border-2 border-transparent text-sm font-semibold uppercase rounded-lg focus:outline-none transition-colors duration-300 text-white bg-[#8554FB] hover:bg-[#8554FB] disabled:bg-none  disabled:!bg-[#383838]  disabled:!text-[#838383]"
                                disabled=""><!---->
                                <div class="inline-flex items-center"> Apply </div><!---->
                            </button></div>
                    </div>
                </div>
            </div>

        </div><!---->
    </div>
</div>



<div class="Toastify" id="Success" style="display:none">
    <div class="Toastify__toast-container Toastify__toast-container--top-right " id="top-right" data-v-app="">
        <div id="zu57k54" class="Toastify__toast Toastify__toast-theme--light Toastify__toast--success">
            <div role="alert" class="Toastify__toast-body ">
                <div class="Toastify__toast-icon Toastify--animate-icon Toastify__zoom-enter"><svg viewBox="0 0 24 24"
                        width="100%" height="100%" fill="var(--toastify-icon-color-success)">
                        <path
                            d="M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z">
                        </path>
                    </svg></div>
                <div data-testid="toast-content" class="text90"></div>
            </div><button class="Toastify__close-button Toastify__close-button--light" type="button"
                aria-label="close"><svg aria-hidden="true" viewBox="0 0 14 16">
                    <path fill-rule="evenodd"
                        d="M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z">
                    </path>
                </svg></button><!---->
            <div role="progressbar" aria-hidden="false" aria-label="notification timer"
                class="Toastify__progress-bar Toastify__progress-bar--animated Toastify__progress-bar-theme--light Toastify__progress-bar--success"
                style="animation-duration: 2000ms; animation-play-state: paused; opacity: 1; transform: none;"></div>
        </div>
    </div>
</div>`
bodyDom.after(MessageContent)
var loadingContent = `    <!-- 加载动画 -->
    <div id="loading-overlay"
        style="display: flex;flex-direction: column; justify-content: center; align-items: center; position: fixed; top: 0; left: 0; width: min(100%, 428px); left: 50%;
        transform: translateX(-50%); height: 100%; background-color: #7c1820; z-index: 9999;">
        <img src="/image/index/Logo.png" alt="" style="width: 40%;position: fixed;top:10px">
        <div style="display: flex;flex-direction: column;width: 100%;padding: 3rem;box-sizing: border-box;">
            <img src="/image/index/gifBox.svg" alt="" style="width: 100%;">
            <img src="/image/index/load.gif" alt="" style="width: 100%;margin-top:20px">
        </div>
    </div>`
bodyDom2.after(loadingContent)
// 添加到桌面
var addHomContent = `
    <!-- 添加到主屏幕 -->
    <div data-v-2d0daec7="" class="addHomeScreen" id="addHome">
        <div data-v-2d0daec7="" class="homeScreen">
        <div class="add"   onclick="addHomeBtn()"></div>
            <span data-v-2d0daec7="" style="font-size: 14px;margin-left:10px" data-translate-key="add home">Thêm vào màn hình chính</span>
            <img src="/image/common/close.svg" alt="" style="width: 20px;margin-left: 10px;" id="closeAddHome">
        </div>
    </div>
    <style>
    .addHomeScreen {
        bottom: min(30.333vw, 73.067px);
        position: fixed;
        width: min(100%, 428px);
        height: min(23.333vw, 87.067px);
        background: rgba(0, 0, 0, .6);
        z-index: 21;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top:10px
    }

    .addHomeScreen .homeScreen {
        display: inline-flex;
        align-items: center;
        height: min(9.067vw, 38.805px);
        padding: 0 min(3.2vw, 13.696px);
        background: #EEDF7A;
        border-radius: min(1.333vw, 5.707px);
        font-size:22.827px;
        color: #fff;
    }
               .add{
            width: min(4vw, 17.12px);
            height: min(4vw, 17.12px);
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAAXNSR0IArs4c6QAABqVJREFUaEPtm3msXVMUh79lnud5ngkS/hARYk7MU4Ka54QQ/hAxU2NMQQSJWQQlUdTQGIJSpSUxRElRNOapZlVaZct3s89zenvb9+67575329ydnLS575x99m+vYa/1W+sEDUZKaT7gKOAIYEdgoUb3dfBvPwGPAXdFxNjyOqN+0SmlTYC9gR2ALYA1gPk7GFyjpf0FfAS8CbwIPBERv3hjD+CUkv9fATgVOA1Ydi4DObvlfgicD4yKiJ/LgJcCbgR2B1aZR8AKYwbwHXBZRNxWA5xSUrICvQJYqwHYLwB36nPgD+CfsnZ0wOYsACwDrA9sCii8+jECuK8AvF9WZe124dKd/wKCfQZ4HngL0CG4a7PY/yABT3nNqwPbAvtk/7Nk3Xq+BCZFSkmAF+Srfs1jgDuz4asWboDS7bTh5utYF8xS3hMYCixeWqhCmiHgnYCTgSGlPwrqK+A2r4j4sdMQzmk9KaXNsgB3BVac6VhKKV0K7AJsV/rDb8Aw4O6IeKNKsPk08JwvTCJFRKVak1JS0jtnM923HvBwYHPA87cYSvdIYEwbFrMEsHwOZgQ9NSK0r8pHSuki4OJ6wC8B69Z55/c0/oj4rKpVZMkK1h3fI/sDJaFveACYEBFTq3qf86SUTgQuzxusVqENjwPWBPRyxfC3gyLi66oWkFLy6FgHuAQ4vDSvIM8xFIwIT4TKRkrp6Dz3Btmh1QC/nBci6GIYfw6JCFW7kpFSMh7XmZwFHFqa9FfgOmB4RHxQycvyJCmlY4BzgfXKgEdnlS4DVsIHtwGwQcGZdRL2XL8eeKQNgI8tAVbDahJuZMOvZZWuUsLa60bA2TkTK4TpkXcVMCIiPqlYwsdlwPqoHsBKWNsqh5QDDfjqDPjjLuAWdiCl1JWwNtxVaaBrwy2YUu3RHN/Ozkt3nVarG5w3edCd1sb5HDYxKYaBhxJ+NCLmuWPJmNa42Ri3HHhcmc/hSVVItphjsI8lU8FVMxNxUgnY5Jysj6wyWekElTa0M5qTMj2+BPiHnEE9WWU62jLgnM9KjK2duaJmSDwZDbkzAVvRkCEthuzK/YAx/aeZm2pmbuf5FvgGmBYRknrFydB/p5WpXPkvg39j72lN2psglLIkwGKlZyUGpwB/An83yYY6p0nJU8C9wLiIcJ5KAG9oyghcCCzSJNj625WCiy3+bXE63gZulzmJCDWmEsDWmQ7LDGcjorvVRbfy/LvAg8AtRQ2pChuWrTgEOKNOJVtZaFXPysGp0ndUCXilzOyfkPkv7a2vQ9WVRNN2PZqWKz0oQa7TMQCR31LV++q0CgL+VeBxYGyVNuzkK+d6cUFu93jEXpDrmHQu0rO7AduU7rdW9TSgWn7fj9Ks6/JZ7XhKRPiu1m0424TlDB1Ws/ViF+Ezlj4s61jpKIaBx3nACxlwmaTvqwZNB6aXwbZsw31985zuSykpYSsdp9QBNty0aG0QUtkY7NBSlba6IU3bKHmQxLNqX9noBMCNsiVZy24+XIWYO0HCXcYD6Kp0Feo86MdSl8T7X4xdlW63Sg9k9dBz2MBD1qMYAy7hgQQ8u0jrmkzTtiPSMk6Xoekpl9qL5Q82kdacm2mWuW8bCuI2zxg3y5wUQ3rnWuChiHi/KnXOXrphy4O5pMRcucdDwHYAVNnjYSytSp+eWUs5MYk9O3huMJ9tAxHfELASFnC55WG8zGJEmJhXMkpdPDbAHZiTfPs+bGS5FRjfpi4e25YkL2opreVSG6ntvZCkK4Z0qRmNDEJfk/xeNyaDtvrgZd7rIiTd3rG1t9cJmrwhpWTubddQrWWpAGymYlNpmYWwmVo1q9yumlxzv27PLVJycFLKEo89QwnbiClhXXYkMhQ2jA2NCJtL56qRUpJZuTl39s/Sa2nnuzvhVT+eA+4BRlfpsdu1e9lkNM+9cp/lLL3fRb+0nXE2cHlO1s6rPJS0zWLu1iuAXruw6b4yi+3CV8zrerxkRAWoU1RbV6tjPzXTyQVgxe6u3ATUN1ZLo/6eP5qY6EO5JNLjCNqNqJf5BbtoBrhlZlYbEY0j5a7L3zwYfBiVHFDfY1x6oWANFDrpEwABe7xZDfEzgEZjQtbSYWXAqrI7ZO3W75UMCjpFiv1VIjfD7j4dryThxJnsMKXkuajR+92Srbe27M3NY1QuwTxbBFGNPtQq2ny3B7bOG+BnPapMYRtF5W+wN6NYv87V0o+lUgMYw1XrTYbNr5cjxjl62vztwP7AVjn8XLpDVV2fYl1KIt+My1zg4UbR239HDp/mjMpqCwAAAABJRU5ErkJggg==);
			background-position: 0 0;
            background-size: 100% 100%;
            background-repeat: no-repeat;
        }
        </style>
`
bodyDom3.after(addHomContent)
var MenuContent = `  <div class="vfm vfm--fixed vfm--inset flex" role="dialog" aria-modal="true" style="z-index:20;display:none" id="menuCont">        <!-- 页面内容 -->
 <div style="background-color: #7c1820; display: flex;flex-direction: column;">
             <div data-v-c46e0b98="" class="flex items-center text-white transition-colors duration-300 relative"
              style="width: 100%;;justify-content: space-between;padding:0.625rem 1rem;boxsizing:border-box">
              <a data-v-c46e0b98="" href="/index.html" class="">
                <img src="/image/index/Logo.png" style="width: 125px;height: 32px;">
              </a>
              <div style="display: flex;align-items: center;">
               <a href="https://cust.xexeboxes.com/chat/index?noCanClose=1&token=df531cde502c1a1d2f4e56c48620b548"
                                target="_blank">
                                <div
                                    style="width: 36px;height: 36px;background-color: #eadf77;border-radius: 50%;display: flex;align-items: center;justify-content: center;">
                                    <svg width="20" height="20" viewBox="0 0 20 18" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M10.1348 17.5C9.92192 17.5 9.74367 17.4282 9.6 17.2845C9.4565 17.141 9.38475 16.9628 9.38475 16.75C9.38475 16.5372 9.4565 16.359 9.6 16.2155C9.74367 16.0718 9.92192 16 10.1348 16H16.6923C16.7756 16 16.8477 15.9743 16.9088 15.923C16.9696 15.8718 17 15.8046 17 15.7212V8.727C17 6.81533 16.316 5.206 14.948 3.899C13.5802 2.592 11.9308 1.9385 10 1.9385C8.06917 1.9385 6.41983 2.592 5.052 3.899C3.684 5.206 3 6.81533 3 8.727V13.8652C3 14.0781 2.92817 14.2563 2.7845 14.4C2.641 14.5435 2.46283 14.6152 2.25 14.6152C1.7705 14.6152 1.359 14.4483 1.0155 14.1145C0.671833 13.7805 0.5 13.3737 0.5 12.8942V10.952C0.5 10.6277 0.592333 10.3305 0.777 10.0605C0.961667 9.79067 1.20267 9.57375 1.5 9.40975L1.54625 8.13275C1.62825 7.04425 1.91092 6.03592 2.39425 5.10775C2.87758 4.17958 3.49742 3.37158 4.25375 2.68375C5.01025 1.99592 5.88333 1.46 6.873 1.076C7.86283 0.691999 8.90517 0.5 10 0.5C11.0948 0.5 12.1346 0.691999 13.1193 1.076C14.1039 1.46 14.977 1.99333 15.7385 2.676C16.5 3.35867 17.1198 4.16408 17.598 5.09225C18.0762 6.02058 18.3614 7.02892 18.4538 8.11725L18.5 9.36925C18.791 9.50642 19.0304 9.70258 19.2183 9.95775C19.4061 10.2129 19.5 10.4975 19.5 10.8115V13.0442C19.5 13.3582 19.4061 13.6428 19.2183 13.898C19.0304 14.1532 18.791 14.3493 18.5 14.4865V15.7212C18.5 16.2134 18.3234 16.6329 17.9703 16.9797C17.6169 17.3266 17.1909 17.5 16.6923 17.5H10.1348ZM7.19225 10.7692C6.94742 10.7692 6.73875 10.6863 6.56625 10.5203C6.39392 10.3542 6.30775 10.1488 6.30775 9.90375C6.30775 9.65892 6.39392 9.45192 6.56625 9.28275C6.73875 9.11342 6.94742 9.02875 7.19225 9.02875C7.43725 9.02875 7.64592 9.11342 7.81825 9.28275C7.99075 9.45192 8.077 9.65892 8.077 9.90375C8.077 10.1488 7.99075 10.3542 7.81825 10.5203C7.64592 10.6863 7.43725 10.7692 7.19225 10.7692ZM12.8077 10.7692C12.5627 10.7692 12.3541 10.6863 12.1818 10.5203C12.0093 10.3542 11.923 10.1488 11.923 9.90375C11.923 9.65892 12.0093 9.45192 12.1818 9.28275C12.3541 9.11342 12.5627 9.02875 12.8077 9.02875C13.0526 9.02875 13.2612 9.11342 13.4337 9.28275C13.6061 9.45192 13.6923 9.65892 13.6923 9.90375C13.6923 10.1488 13.6061 10.3542 13.4337 10.5203C13.2612 10.6863 13.0526 10.7692 12.8077 10.7692ZM4.37125 9.2C4.26742 7.568 4.77508 6.1715 5.89425 5.0105C7.01342 3.84967 8.39867 3.26925 10.05 3.26925C11.4372 3.26925 12.6612 3.69842 13.722 4.55675C14.783 5.41508 15.4269 6.52625 15.6538 7.89025C14.2333 7.87358 12.9208 7.50058 11.7163 6.77125C10.5118 6.04175 9.58708 5.04175 8.94225 3.77125C8.68842 5.01475 8.15642 6.11408 7.34625 7.06925C6.53592 8.02442 5.54425 8.73467 4.37125 9.2Z"
                                            fill="#7C1820" />
                                    </svg>
                                </div>
                            </a>
              </div>
            </div>
           <div class="header-banner  flex items-center justify-center" style="background-color: #7c1820;padding-bottom:15px">
                    <img src="/image/index/verified_user.svg" alt="">
                    <span style="color: #fff;font-size: 10px;margin-left: 10px;" data-translate-key="100% authentic products">Hàng chính hãng 100%</span>
                    <img src="/image/index/actual.svg" alt="" style="margin-left: 20px;">
                    <span style="color: #fff;font-size: 10px;margin-left: 10px;" data-translate-key="Actual">Tỉ lệ trúng thật Hộp</span>
                </div>
 </div>        
 <div class="menu-main-content" >
            <!--用户信息卡片  -->
            <div class="user-card">
             
              <div class="right">
                <div style="display: flex;align-items: center;color: #fff;">
                  <span id="userName" style="font-size:14px;"></span>
                  <div style="font-size:12px;margin-left:10px">
                 <span class="level" >⭐</span>
                 <span class="level"  id="user-level">⭐Level 8</span>
                  </div>
                </div>
                <div style="display: flex;align-items: center;color: #fff;">
                  <img src="/image/index/coin.svg" alt="">
                  <span id="pointsNum" style="font-size:12px;margin-left:10px">₫ 2200</span>

                </div>
              </div>
            </div>
            <!-- 菜单列表 -->
            <div class="menu-list">
              <!--<a href="/boxes.html">-->
              <!--  <div class="menu-item">-->
              <!--    <img src="/image/menu/icon1.png" alt="">-->
              <!--    <span data-translate-key="Boxes">hộp</span>-->
              <!--  </div>-->
              <!--</a>-->
              <a href="/mall.html?v=1.0.1">
                <div class="menu-item">
                  <img src="/image/menu/icon2.png" alt="">
                  <span data-translate-key="Mall">mall</span>
                </div>
              </a>
              <a href="/vipLevel.html">
                <div class="menu-item">
                  <img src="/image/menu/icon3.png" alt="">
                  <span data-translate-key="Vip Level">VIP level </span>
                </div>
              </a>
              <a href="">
                <div class="menu-item">
                  <img src="/image/menu/icon4.png" alt="">
                  <span data-translate-key="Leader Board">bảng xếp hạng</span>
                </div>
              </a>

              <a href="/personalApply.html?type=1">
                <div class="menu-item">
                  <img src="/image/menu/icon5.png" alt="">
                  <span data-translate-key="Partnership">Hợp tác</span>
                </div>
              </a>
              <a href="/personalApply.html?type=2">
                <div class="menu-item" style="border: none;">
                  <img src="/image/menu/icon7.png" alt="">
                  <span data-translate-key="Agent">đại lý</span>
                </div>
              </a>
            </div>
<style>
#menuCont{
              height:100%;
    width: min(100%, 428px);
              background-color:#fff;
              display: flex;
              flex-direction: column;
              left:auto;
              right:auto
                            }
  .menu-main-content {
    display: flex;
    flex-direction: column;
    padding: 10px 20px 115px 20px;
    box-sizing: border-box;
    width: min(100%, 428px);
    background-color:#fff;
    min-height:60vh;
     overflow: auto; /* 隐藏溢出的内容 */
    
  }

  .user-card {
    border-radius: 20px;
    width: 100%;
    background-image: url("/image/menu/card.png");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 100% auto;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
  }

  .right {
    display: flex;
    flex-direction: column;
  }
  .menu-list{
    background-color: #fff4f3;
    border-radius: 20px;
    padding: 0 15px;
    box-sizing: border-box;
    width: 100%;
    display: flex;
    flex-direction: column;
    margin-top: 20px;
  }
  .menu-item{
    width: 100%;
    display: flex;
    align-items: center;
    padding: 20px;
    box-sizing: border-box;
    border-bottom: 1px solid #eee5e5;
  }
  .menu-item img{
    width:26px;
    margin-right: 15px;
   
  }
</style>
          </div>
           </div>
        `
bodyDom3.after(MenuContent)

var token = localStorage.getItem("token")
var userNameData = localStorage.getItem("userNameData")
var userImg = localStorage.getItem("userImg")
var userMoney = localStorage.getItem("userMoney")
var user_level = localStorage.getItem("userLevel")




$("#userName").text(userNameData)
$('#image').attr('src', userImg);
$('#pointsNum').text(userMoney);
$('#user-level').text(user_level);



$("#dltitle").text('Đi vào');
$("#zctitle").text(language['17']);
$("#email").text(language['66']);
$('#email').attr('placeholder', language['66']);
$("#phone").text(language['140']);
$('#phone').attr('placeholder', language['140']);
$('#password').attr('placeholder', language['94']);
$('#name').attr('placeholder', language['96']);
$('#zcemail').attr('placeholder', language['97']);
$('#zcphone').attr('placeholder', language['140']);
$('#zccode').attr('placeholder', language['141']);
$('#passwords').attr('placeholder', language['94']);
$('#qpasswords').attr('placeholder', language['98']);
$('#foremail').attr('placeholder', language['95']);
$('#forphone').attr('placeholder', language['140']);
$('#forcode').attr('placeholder', language['141']);
$('#forpassword').attr('placeholder', language['94']);
$('#forqpassword').attr('placeholder', language['98']);
$('#title').attr('placeholder', language['57']);
$('#message').attr('placeholder', language['58']);

$('#zcyz').attr('placeholder', language['144']);
$('#foryz').attr('placeholder', language['144']);
for (i = 0; i <= language.length; i++) {
    $(".text" + i).text(language[i]);
}
// 页面加载完成
document.addEventListener("DOMContentLoaded", function () {
    // 检查localStorage中是否有hideAddHomeScreen值
    if (localStorage.getItem('hideAddHomeScreen') === 'true') {
        document.getElementById('addHome').style.display = 'none';
    }
    if(currentPath=='/shareResult.html'){
        document.getElementById('addHome').style.display = 'none';

    }

    // 获取关闭按钮并添加点击事件监听器
    document.getElementById('closeAddHome').addEventListener('click', function () {
        // 未登录
        if (!token) {
            $("#userInfo").show();
            $("#loginInfo").show();
            $("#zcInfo").hide();
            document.getElementById('dltitle').style.color = '#7c1820';
            document.getElementById('zctitle').style.color = '#707f81';
            // 禁止页面滚动
            document.body.style.overflow = "hidden";
            // 设置焦点到弹出层
            $("#email").focus();
            return
        }
        document.getElementById('addHome').style.display = 'none';
        localStorage.setItem('hideAddHomeScreen', 'true'); // 存储状态到localStorage
    });





    const loadingOverlay = document.getElementById("loading-overlay");

    setTimeout(function () {
        loadingOverlay.style.display = "none";
    }, 1000);

    // 获取自定义链接元素
    var linkElement = document.getElementById('custom-link');

    // 检查 localStorage 中是否存在 "userNameData"
    var userNameData = localStorage.getItem("userNameData");

    // 构造 URL
    let url;
    if (userNameData) {
        // 如果存在 userNameData，添加 nickName 参数
        url = `https://cust.xexeboxes.com/chat/index?noCanClose=1&token=df531cde502c1a1d2f4e56c48620b548&nickName=${encodeURIComponent(userNameData)}&avatar=https://rxexebox.oss-ap-southeast-7.aliyuncs.com/public/img/6009094.svg`;
    } else {
        // 如果不存在 userNameData，使用默认链接
        url = `https://cust.xexeboxes.com/chat/index?noCanClose=1&token=df531cde502c1a1d2f4e56c48620b548&avatar=https://rxexebox.oss-ap-southeast-7.aliyuncs.com/public/img/6009094.svg`;
    }

    // 为自定义链接绑定点击事件
    if (linkElement) {

        linkElement.addEventListener("click", function (e) {
            e.preventDefault(); // 阻止默认行为（如果需要）
            window.open(url, '_blank'); // 在新标签页中打开链接
        });
    }
    if (token) {
        // 获取用户信息
        sendRequest(
            "POST",
            APIURL + "/api/User/getMember",
            {},
            {
                'token': token // 将 token 放入 headers 中
            },
            function (data) {

                localStorage.setItem("userNameData", data.data.id); // 保存用户ID到本地存储
                localStorage.setItem("userMoney", `₫ ${data.data.money}`); // 保存用户余额到本地存储
                localStorage.setItem("ClientIP", data.data.ip||''); // 保存用户IP到本地存储
                localStorage.setItem("userEmail", data.data.email||''); // 保存用户IP到本地存储
                localStorage.setItem("userPhone", data.data.phone||''); // 保存用户IP到本地存储
                userNameData = data.data.id; // 更新全局变量
                userMoney = `₫ ${data.data.money}`; // 更新全局变量
            },
            function (xhr, status, error) {
                // ;
                // alert(alertMessage + " " + xhr.status + " " + xhr.statusText);
                console.error('获取用户信息失败:', error);
            }
        );

        // 获取 VIP 等级
        sendRequest(
            "POST",
            APIURL + "/api/vip/getMangheByVip",
            {},
            {
                'token': token // 将 token 放入 headers 中
            },
            function (data) {
                // console.log('VIP 等级', data.data);

                localStorage.setItem("userLevel", data.data.user_level.level); // 保存 VIP 等级到本地存储
            },
            function (xhr, status, error) {

                console.error('获取 VIP 等级失败:', error);
            }
        );
        // console.log('一些存储的数据', userNameData, userMoney, user_level)

    }

});
// 获取创建桌面图标按钮并添加点击事件监听器
function addHomeBtn() {
    // 未登录
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";
        // 设置焦点到弹出层
        $("#email").focus();

    } else {
        // console.log('111')
        showTipPop()
    }
}



// 获取自媒体列表
sendRequest(
    "POST",
    APIURL + "/api/login/getAds",
    {}, // data
    null,
    function (data) {
        const zimeitiDom = document.getElementById('zimeiti');
        if (zimeitiDom) {
            zimeitiDom.innerHTML = ''; // 清空当前内容
            data.data.forEach(item => {
                const zimeitiCont = `<li style="width: 40px;height:40px" onclick="jumpMedia('${item.url}')"><img src="${item.image}"
                                            style="width:100%;height:100%"></li>`;
                zimeitiDom.innerHTML += zimeitiCont;
            });
        }

    },
    function (xhr, status, error) {
        // 错误回调

    }
);
// 跳转
function jumpMedia(url) {
    <!--console.log('跳转', url)-->
    window.open(url, '_blank'); // 在新标签页中打开
}
// 语言
function translatePage(langCode) {
    const elements = document.querySelectorAll("[data-translate-key]");
    elements.forEach(element => {
        const key = element.getAttribute("data-translate-key");
        const translation = translations[langCode][key] || key; // 如果没有翻译，保留原内容
        // 如果是 input 或其他有 placeholder 的元素，设置 placeholder
        if (element.placeholder !== undefined) {
            element.placeholder = translation;
        } else {
            // 否则，设置 textContent
            element.textContent = translation;
        }
    });
}

// 检测语言并翻译
const userLang = navigator.language || navigator.userLanguage;

const langCode = userLang.split('-')[0].toLowerCase(); // 获取语言代码，如 "zh"、"en" 或 "vi"
// const langCode = 'vi';
// const langCode = 'en';


localStorage.setItem("langCode", langCode)

translatePage(langCode)
// 显示提示消息的函数
function showToast(message, duration) {
    var toastElement = document.createElement("div");
    toastElement.style.position = "fixed";
    toastElement.style.top = "40%";
    toastElement.style.fontSize = "12px";
    toastElement.style.left = "50%";
    toastElement.style.transform = "translateX(-50%)";
    toastElement.style.padding = "10px 20px";
    toastElement.style.backgroundColor = "rgba(0, 0, 0, 0.7)";
    toastElement.style.color = "#fff";
    toastElement.style.borderRadius = "5px";
    toastElement.style.zIndex = "9999";
    toastElement.textContent = message;
    document.body.appendChild(toastElement);
    setTimeout(function () {
        document.body.removeChild(toastElement);
    }, duration);
}
var pagePath = localStorage.getItem("currentPath")
var menuSelect = false
var id = "";
var userContentDom = jQuery("#tobar")
userContentDom.empty()
var taberContent = `
                    <div data-v-b1df64fc="" class="w-full tabbar-item" >
                        <a  onclick="openMenu()">
                            <button data-v-b1df64fc=""
                                class="flex flex-col items-center w-full text-white/50">
                                ${pagePath == '/index.html' && !menuSelect ? '<img id="menuImg" src="../image/index/home1.svg" class="tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">' : (menuSelect ? '<img id="menuImg" src="../image/index/home-selected.png" class="tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">' : '<img src="../image/index/home.png" class="tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20" id="menuImg">')}
                                ${menuSelect ? `<span data-v-b1df64fc="" class="text-[10px] font-medium leading-[10px]" data-translate-key="Menu">Menu</span>` : 
                                `<span data-v-b1df64fc="" class="text-[10px] font-medium leading-[10px]" data-translate-key="Menu">Home</span>`}
                            </button>
                        </a>
                    </div>
                    <div data-v-b1df64fc="" class="w-full tabbar-item" >
                         <a href="/mall.html?v=1.0.1">
                            <button data-v-b1df64fc="" class="flex flex-col items-center w-full">
                                    ${pagePath == '/mall.html' ? '<img src="../image/index/shop-selected.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">' : '<img src="../image/index/shop.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">'}
                                <span data-v-b1df64fc="" class="text-[10px] font-medium text-white/50 leading-[10px]" data-translate-key="Mall">
                                   Mall
                                </span>
                            </button>
                        </a>
                    </div>
                    <div data-v-b1df64fc="" class="w-20 flex-shrink-0"></div>
                    
                    <div data-v-b1df64fc="" class="w-full tabbar-item" >
                        <a data-v-b1df64fc="" onclick="toBlog()"
                            class="flex flex-col font-medium text-white/50 text-[10px] items-center">
                            <div data-v-b1df64fc="" class="transition-colors duration-300 ">
                                ${pagePath == '/blog/index.html' ? '<img src="../image/index/blog-selected.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">' : '<img src="../image/index/blog.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="18" height="18">'}
                            </div>
                            <span data-v-b1df64fc="" class="leading-[10px]" data-translate-key="Community" _t="社区"></span>
                        </a>
                    </div>
                    <div data-v-b1df64fc="" class="w-full tabbar-item">
                        <a data-v-b1df64fc=""
                            class="flex flex-col font-medium text-white/50 text-[10px] items-center" onclick="user()">
                            <div data-v-b1df64fc="" class="transition-colors duration-300">
                                ${pagePath == '/profile.html' ? '<img src="../image/index/user-selected.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">' : '<img src="../image/index/user.svg" class=" tab-icons icon transition-colors duration-300 mb-1.5" alt="Icon" width="20" height="20">'}

                            </div><span data-v-b1df64fc="" class="leading-[10px]" data-translate-key="UserCenter">Tài khoản</span>
                        </a>
                  </div>
                  <div data-v-b1df64fc="" class="flex absolute left-1/2  -translate-x-1/2 h-full  items-center justify-center" style="width:60px;height:63px;top:5">
                        <button data-v-b1df64fc="" type="button" class="flex items-center rounded-full text-white " onclick="payType()" style="background-color:#fff;padding:19px;border-radius:50%"> 
                        <img src="/image/index/Vector.svg" class="icon transition-colors duration-300 " alt="Icon" width="30" height="30">
                        </button>
                        <div data-v-b1df64fc="" class="flex items-center gap-1 absolute -top-1/3 "style=" top:-51%;background-color:#fdf4f4;border-radius:30px;width:98px;height:22px;display:flex;align-items:center;justify-content:center;padding:3px 8px">
                        <span></span>
                            <span class="relative text-inherit" data-translate-key="login" id="userMoney" style="font-size:12px;color:#74171e">`+language['16']+`</span>
                        </div>
                    </div>
`

userContentDom.append(taberContent)

// 打开商城
function openMall() {
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";

        // 设置焦点到弹出层
        $("#email").focus();
        return
    } else {
        window.location.href = '/mall.html?v=1.0.1'
    }
}
// 打开菜单
function openMenuPop() {
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";
        // 设置焦点到弹出层
        $("#email").focus();
        return
    } else if (token && !userNameData) {
        sendRequest(
            "POST",
            APIURL + "/api/User/getMember",
            {}, // 请求数据为空对象
            {
                'token': token // 将 token 放入 headers 中
            },
            function (data) {
                // console.log('用户信息', data.data);

                // 保存用户信息到 localStorage
                localStorage.setItem("userNameData", data.data.id);
                localStorage.setItem("userMoney", `₫ ${data.data.money}`);

                // 更新全局变量
                userNameData = data.data.id;
                userMoney = `₫ ${data.data.money}`;

                // 更新页面上的用户信息
                $("#userName").text(userNameData); // 更新用户名
                $('#pointsNum').text(userMoney); // 更新用户余额

                // 打印存储的数据
                // console.log('一些存储的数据', userNameData, userMoney);
            },
            function (xhr, status, error) {
                // 错误回调
                console.error('请求失败:', error);
            }
        );

    }
    let tabNum = ''
    const menuImg = document.getElementById('menuImg'); // 获取菜单图标元素
    tabNum = 0
    menuSelect = true
    $("#menuCont").show();
    // 禁止页面滚动
    document.body.style.overflow = "hidden";
    menuImg.src = "../image/index/home-selected.png"

}
function openMenu() {
    let tabNum = ''
    const menuImg = document.getElementById('menuImg'); // 获取菜单图标元素
    if (!menuSelect) {
        tabNum = 0
        menuImg.src = "../image/index/home1.svg"
        window.location.href = '/index.html'
    } else {
        tabNum = ''
        menuSelect = false
        $("#menuCont").hide();
        // 恢复页面滚动
        document.body.style.overflow = "auto";
        menuImg.src = "../image/index/home.png"
    }
}


// 定义一个函数来设置 Tab 的选中状态
function selectTab() {
    let tabNum = ''
    // if (pagePath == '/index.html') {
    if (pagePath == '/menu.html') {
        tabNum = 0
    } else if (pagePath == '/boxes.html') {
        tabNum = 2
    } else if (pagePath == '/profile.html') {
        tabNum = 3
    }
    const tabIcons = document.querySelectorAll(".tab-icons"); // 获取所有 Tab 图标

    tabIcons.forEach((icon, i) => {
        if (i == tabNum) {
            // 当前选中的 Tab，切换到选中状态的图片
            if (icon.src.endsWith("-selected.png")) {
                // 如果已经是选中状态，不需要替换
                return;
            }
            icon.src = icon.src.replace(/\.png$/, "-selected.png");
        } else {
            // 其他 Tab，切换回未选中状态的图片
            if (icon.src.endsWith(".png")) {
                // 如果已经是未选中状态，不需要替换
                return;
            }
            icon.src = icon.src.replace(/-selected\.png$/, ".png");
        }
    });
}


function loginClose() {
    $("#loginInfo").hide();
    $("#userInfo").hide();
    $("#zcInfo").hide();
    // 恢复页面滚动
    document.body.style.overflow = "auto";
    // 清空登录输入框
    $("#email").val(""); // 清空邮箱输入框
    $("#password").val(""); // 清空密码输入框
    $("#emailLoginText").hide(); // 隐藏邮箱提示
    $("#passwordLoginText").hide(); // 隐藏密码提示

    // 清空注册输入框
    $("#zcemail").val(""); // 清空邮箱输入框
    $("#zcphone").val(""); // 清空手机号输入框
    $("#zccode").val(""); // 清空验证码输入框
    $("#passwords").val(""); // 清空密码输入框
    $("#qpasswords").val(""); // 清空确认密码输入框
    $("#name").val(""); // 清空昵称输入框

    // 隐藏所有提示信息
    $("#emailZcText").hide(); // 隐藏邮箱提示
    $("#phoneZcText").hide(); // 隐藏手机号提示
    $("#codeZcText").hide(); // 隐藏验证码提示
    $("#zcpasswordText").hide(); // 隐藏密码提示
    $("#qpasswordsText").hide(); // 隐藏确认密码提示
    $("#nameText").hide(); // 隐藏昵称提示
    $("#likeMessage").hide(); // 隐藏协议提示
    $("#byMessage").hide(); // 隐藏协议提示
}
function zc() {
    $("#kjdl").hide();
    $("#zcInfo").show();
    $("#loginInfo").hide();
    document.getElementById('dltitle').style.color = '#707f81';
    document.getElementById('zctitle').style.color = '#7c1820';
}
function zcSubmit() {
    var zcyzd = $('#canvas').attr('data-code').toLowerCase(); // 存储的验证码转为小写
    var zcyz = $("#zcyz").val().toLowerCase(); // 用户输入的验证码转为小写
    if (zcyz != zcyzd) {
        if (langCode == "vi") {
            $('#zcyzText').text('Mã xác minh không đúng');
        } else if (langCode == "zh") {
            $('#zcyzText').text('验证码不正确');
        } else {
            $('#zcyzText').text('Incorrect verification code');
        }
        $("#zcyzText").show();
        return false;
    } else {
        $("#zcyzText").hide();
    }
    var password = $("#passwords").val();
    var qpassword = $("#qpasswords").val();
    var email = $("#zcemail").val();
    var name = $("#name").val();
    $("#nameText").hide();
    $("#emailZcText").hide();
    $("#zcpasswordText").hide();
    $("#qpasswordsText").hide();
    $("#likeMessage").hide();
    $("#byMessage").hide();
    if (!name) {
        if (langCode == "vi") {
            $('#nameText').text(language['101']);
        } else if (langCode == "zh") {
            $('#nameText').text('请输入昵称*');
        } else {
            $('#nameText').text('Please enter an alias*');
        }
        $("#nameText").show();
        return false;
    }
    if (!email) {
        if (langCode == "vi") {
            $('#emailZcText').text(language['95']);
        } else if (langCode == "zh") {
            $('#emailZcText').text('请输入您的电子邮件');
        } else {
            $('#emailZcText').text('Please enter your email address');
        }
        $("#emailZcText").show();
    } else {
        $("#emailZcText").hide();
    }
    let reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/;
    if (!reg.test(email)) {
        if (langCode == "vi") {
            $('#emailZcText').text('Vui lòng nhập email hợp lệ');
        } else if (langCode == "zh") {
            $('#emailZcText').text('请输入正确的电子邮件');
        } else {
            $('#emailZcText').text('Please enter a valid email');
        }
        $("#emailZcText").show();
        return false;
    } else {
        $("#emailZcText").hide();
    }
    // console.log(password, "password")
    if (!password) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['23']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('请输入您的密码');
        } else {
            $('#zcpasswordText').text('Please enter your password');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['25']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('密码必须至少有6个字符');
        } else {
            $('#zcpasswordText').text('The password must be at least 6 characters long');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['26']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('密码必须包含大写和小写');
        } else {
            $('#zcpasswordText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    if (!qpassword) {
        if (langCode == "vi") {
            $('#qpasswordsText').text(language['24']);
        } else if (langCode == "zh") {
            $('#qpasswordsText').text('请输入确认密码');
        } else {
            $('#qpasswordsText').text('Please enter the confirmation password');
        }
        $("#qpasswordsText").show();
        return false;
    } else {
        $("#qpasswordsText").hide();
    }
    if (qpassword != password) {
        if (langCode == "vi") {
            $('#qpasswordsText').text(language['27']);
        } else if (langCode == "zh") {
            $('#qpasswordsText').text('输入密码不匹配');
        } else {
            $('#qpasswordsText').text('The input password does not match');
        }
        $("#qpasswordsText").show();
        return false;
    } else {
        $("#qpasswordsText").hide();
    }
    if (!$('#like').is(':checked')) {
        if (langCode == "vi") {
            $('#likeMessage').text(language['30']);
        } else if (langCode == "zh") {
            $('#likeMessage').text('请选择同意条款');
        } else {
            $('#likeMessage').text('Please select the agreement terms');
        }
        $("#likeMessage").show();
        return false;
    } else {
        $("#likeMessage").hide();
    }
    if (!$('#by').is(':checked')) {
        if (langCode == "vi") {
            $('#byMessage').text(language['30']);
        } else if (langCode == "zh") {
            $('#byMessage').text('请选择同意条款');
        } else {
            $('#byMessage').text('Please select the agreement terms');
        }
        $("#byMessage").show();
        return false;
    } else {
        $("#byMessage").hide();
    }
    $('#zcStyle').attr('disabled', true);
    translatePage(langCode)
    sendRequest(
        "POST",
        APIURL + "/api/login/verifyEmail",
        JSON.stringify({
            nickname: name,
            email: email,
            password: password,
            repassword: qpassword,
            state: localStorage.getItem('userId')
        }),
        null, // 不需要额外的 headers
        function (data) {
            if (data.data.messageCode == "发送成功！") {
                
                try {
                    localStorage.setItem('userEmail',email);
                    document.dispatchEvent(new CustomEvent('CompleteRegistration', {
                        detail: {
                            userData: {
                                'em':email
                            },
                            customData: {
                                'registration_method':'Email Registration'
                            }
                        }
                    }));
                }catch (e) {
                    console.error(e)
                }
                // 隐藏注册信息区域，显示成功提示
                $("#zcInfo").hide();
                $(".Toastify1").show();
                $(".Toastify2").hide();
                $("#loginInfo").show();

                // 清空输入框
                $("#passwords").val('');
                $("#qpasswords").val('');
                $("#zcemail").val('');
                $("#name").val('');

                // 隐藏成功提示
                setTimeout(function () {
                    $(".Toastify1").hide();
                }, 1000);
                // 显示成功弹窗
                let btnText = 'Xác nhận';

                if (langCode == "vi") {
                    btnText = 'Xác nhận'; // 提示用户选择省份
                } else if (langCode == "zh") {
                    btnText = '确认'; // 提示用户选择省份
                } else {
                    btnText = 'Confirm'; // 提示用户选择省份
                }
                // 显示成功弹窗
                const alertMessage = translations[langCode]?.["email send"] || 'Email đã được gửi thành công, vui lòng vào hộp thư của bạn để hoàn tất xác minh';
                showSuccessPopup(alertMessage, btnText);
            } else {
                // 显示错误提示
                $(".Toastify2").show();
                $("#messageContent").text(data.message);
                setTimeout(function () {
                    $(".Toastify2").hide();
                }, 1000);
            }

            // 重新启用注册按钮
            $('#zcStyle').attr('disabled', false);
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);

            // 重新启用注册按钮
            $('#zcStyle').attr('disabled', false);
        }
    );
}
function eye(num) {
    // console.log(num, "num")
    var eye = ""
    if (num == 1) {
        var leixing = $('#password').attr('type')
        if (leixing == "password") {
            // console.log(num, "44444")
            $('#password').attr('type', 'text');
            $('#lpeye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="lpeye"><path  fill="currentColor" d="M8 3C4.667 3 1.82 5.073.667 8c1.153 2.927 4 5 7.333 5s6.18-2.073 7.333-5c-1.153-2.927-4-5-7.333-5Zm0 8.333a3.335 3.335 0 0 1 0-6.666 3.335 3.335 0 0 1 0 6.666ZM8 6c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2Z"></path></svg>`
        } else {
            $('#password').attr('type', 'password');
            $('#lpeye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="lpeye"><path   fill="currentColor"
                                            d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                        </path></svg>`
        }
        $('#eyebutton1').append(eye);
    }
    if (num == 2) {
        var leixing = $('#passwords').attr('type')
        if (leixing == "password") {
            // console.log(num, "44444")
            $('#passwords').attr('type', 'text');
            $('#peye').remove();
            eye = `  <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="peye"><path  fill="currentColor" d="M8 3C4.667 3 1.82 5.073.667 8c1.153 2.927 4 5 7.333 5s6.18-2.073 7.333-5c-1.153-2.927-4-5-7.333-5Zm0 8.333a3.335 3.335 0 0 1 0-6.666 3.335 3.335 0 0 1 0 6.666ZM8 6c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2Z"></path></svg>`
        } else {
            $('#passwords').attr('type', 'password');
            $('#peye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="peye"><path   fill="currentColor"
                                            d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                        </path></svg>`
        }
        $('#eyebutton2').append(eye);
    }
    if (num == 3) {
        var leixing = $('#qpasswords').attr('type')
        if (leixing == "password") {
            $('#qpasswords').attr('type', 'text');
            $('#qpeye').remove();
            eye = `  <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="qpeye"><path  fill="currentColor" d="M8 3C4.667 3 1.82 5.073.667 8c1.153 2.927 4 5 7.333 5s6.18-2.073 7.333-5c-1.153-2.927-4-5-7.333-5Zm0 8.333a3.335 3.335 0 0 1 0-6.666 3.335 3.335 0 0 1 0 6.666ZM8 6c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2Z"></path></svg>`
        } else {
            $('#qpasswords').attr('type', 'password');
            $('#qpeye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="qpeye"><path   fill="currentColor"
                                            d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                        </path></svg>`


        }
        $('#eyebutton3').append(eye);
    }
    if (num == 4) {
        var leixing = $('#forpassword').attr('type')
        if (leixing == "password") {
            $('#forpassword').attr('type', 'text');
            $('#forpeye').remove();
            eye = `  <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="forpeye"><path  fill="currentColor" d="M8 3C4.667 3 1.82 5.073.667 8c1.153 2.927 4 5 7.333 5s6.18-2.073 7.333-5c-1.153-2.927-4-5-7.333-5Zm0 8.333a3.335 3.335 0 0 1 0-6.666 3.335 3.335 0 0 1 0 6.666ZM8 6c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2Z"></path></svg>`
        } else {
            $('#forpassword').attr('type', 'password');
            $('#forpeye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="forpeye"><path   fill="currentColor"
                                            d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                        </path></svg>`


        }
        $('#eyebutton4').append(eye);
    }
    if (num == 5) {
        var leixing = $('#forqpassword').attr('type')
        if (leixing == "password") {
            $('#forqpassword').attr('type', 'text');
            $('#forqpeye').remove();
            eye = `  <svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="forqpeye"><path  fill="currentColor" d="M8 3C4.667 3 1.82 5.073.667 8c1.153 2.927 4 5 7.333 5s6.18-2.073 7.333-5c-1.153-2.927-4-5-7.333-5Zm0 8.333a3.335 3.335 0 0 1 0-6.666 3.335 3.335 0 0 1 0 6.666ZM8 6c-1.107 0-2 .893-2 2s.893 2 2 2 2-.893 2-2-.893-2-2-2Z"></path></svg>`
        } else {
            $('#forqpassword').attr('type', 'password');
            $('#forqpeye').remove();
            eye = `<svg data-v-b323f4c4="" data-v-d9e5cc92="" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="none" class="icon" id="forqpeye"><path   fill="currentColor"
                                            d="M8 4.313a3.335 3.335 0 0 1 3.333 3.334c0 .34-.066.666-.16.973l2.04 2.04a7.867 7.867 0 0 0 2.12-3.02 7.888 7.888 0 0 0-9.76-4.613L7.02 4.473c.313-.093.64-.16.98-.16ZM1.807 2.087c-.26.26-.26.68 0 .94L3.12 4.34A7.928 7.928 0 0 0 .667 7.647c1.153 2.926 4 5 7.333 5 1.013 0 1.98-.2 2.873-.547l1.814 1.813a.664.664 0 1 0 .94-.94L2.753 2.087a.672.672 0 0 0-.946 0ZM8 10.98a3.335 3.335 0 0 1-3.333-3.333c0-.514.12-1 .326-1.427L6.04 7.267c-.02.12-.04.246-.04.38 0 1.106.893 2 2 2 .133 0 .253-.02.38-.047l1.047 1.047A3.209 3.209 0 0 1 8 10.98Zm1.98-3.553a1.98 1.98 0 0 0-1.76-1.76l1.76 1.76Z">
                                        </path></svg>`


        }
        $('#eyebutton5').append(eye);
    }
}
function submitLogin() {
    var password = $("#password").val();
    var email = $("#email").val();
    $("#emailLoginText").hide();
    $("#passwordLoginText").hide();
    if (!email) {
        if (langCode == "vi") {
            $('#emailLoginText').text(language['95']);
        } else if (langCode == "zh") {
            $('#emailLoginText').text('请输入您的电子邮件');
        } else {
            $('#emailLoginText').text('Please enter your email address');
        }
        $("#emailLoginText").show();
    }
    let reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/;
    if (!reg.test(email)) {
        if (langCode == "vi") {
            $('#emailLoginText').text('Vui lòng nhập email hợp lệ');
        } else if (langCode == "zh") {
            $('#emailLoginText').text('请输入正确的电子邮件');
        } else {
            $('#emailLoginText').text('Please enter a valid email');
        }
        $("#emailLoginText").show();
        return false;
    }
    if (!password) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['23']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('请输入您的密码');
        } else {
            $('#passwordLoginText').text('Please enter your password');
        }
        $("#passwordLoginText").show();
        return false;
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['25']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('密码必须至少有6个字符');
        } else {
            $('#passwordLoginText').text('The password must be at least 6 characters long');
        }
        $("#passwordLoginText").show();
        return false;
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['26']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('密码必须包含大写和小写');
        } else {
            $('#passwordLoginText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#passwordLoginText").show();
        return false;
    }
    sendRequest(
        "POST",
        APIURL + "/api/login/login",
        JSON.stringify({
            email: email,
            password: password
        }),
        null, // 不需要额外的 headers
        function (data) {
            if (data.data.messageCode == "登录成功") {
                // 登录成功，保存 token 到 localStorage 并刷新页面
                localStorage.setItem("token", data.data.token, 60 * 60 * 1000);//过期时间一个小时
                location.reload();
            } else {
                // 登录失败，显示错误提示
                $(".Toastify2").show();
                $("#messageContent").text(data.message);
                setTimeout(function () {
                    $(".Toastify2").hide();
                }, 1000);
            }
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);
        }
    );
}
function submitPhoneLogin() {
    var password = $("#password").val();
    var phone = $("#phone").val();
    console.log(phone);
    $("#phoneLoginText").hide();
    $("#passwordLoginText").hide();
    if (!phone) {
        if (langCode == "vi") {
            $('#phoneLoginText').text(language['140']);
        } else if (langCode == "zh") {
            $('#phoneLoginText').text('请输入电话*');
        } else {
            $('#phoneLoginText').text('Please enter phone number*');
        }
        $("#phoneLoginText").show();
    }
    if (!password) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['23']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('请输入您的密码');
        } else {
            $('#passwordLoginText').text('Please enter your password');
        }
        $("#passwordLoginText").show();
        return false;
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['25']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('密码必须至少有6个字符');
        } else {
            $('#passwordLoginText').text('The password must be at least 6 characters long');
        }
        $("#passwordLoginText").show();
        return false;
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#passwordLoginText').text(language['26']);
        } else if (langCode == "zh") {
            $('#passwordLoginText').text('密码必须包含大写和小写');
        } else {
            $('#passwordLoginText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#passwordLoginText").show();
        return false;
    }
    sendRequest(
        "POST",
        APIURL + "/api/login/phone_login",
        JSON.stringify({
            phone: phone,
            password: password
        }),

        null, // 不需要额外的 headers
        function (data) {

            if (data.code == 200) {
                // 登录成功，保存 token 到 localStorage 并刷新页面
                localStorage.setItem("token", data.data.token);
                location.reload();
            } else {
                // 登录失败，显示错误提示
                $(".Toastify2").show();
                $("#messageContent").text(data.message);
                setTimeout(function () {
                    $(".Toastify2").hide();
                }, 1000);
            }
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);
        }
    );
}

function submitPhoneLogin2() {
    var password = $("#forcode2").val();
    var phone = $("#phone").val();
    console.log(phone);
    $("#phoneLoginText").hide();
    $("#codeForText2").hide();
    if (!phone) {
        if (langCode == "vi") {
            $('#phoneLoginText').text(language['140']);
        } else if (langCode == "zh") {
            $('#phoneLoginText').text('请输入电话*');
        } else {
            $('#phoneLoginText').text('Please enter phone number*');
        }
        $("#phoneLoginText").show();
    }
    if (!password) {
        if (langCode == "vi") {
            $('#codeForText2').text('Mã xác minh không đúng');
        } else if (langCode == "zh") {
            $('#codeForText2').text('验证码不正确');
        } else {
            $('#codeForText2').text('Incorrect verification code');
        }
        $("#codeForText2").show();
        return false;
    }
    sendRequest(
        "POST",
        APIURL + "/api/login/mobile_login",
        JSON.stringify({
            phone: phone,
            code: password,
            state: localStorage.getItem('userId')
        }),

        null, // 不需要额外的 headers
        function (data) {

            if (data.code == 200) {
                
                try{
                    if(data.data['register']){

                        localStorage.setItem('userPhone',phone);
                        document.dispatchEvent(new CustomEvent('CompleteRegistration', {
                            detail: {
                                userData: {
                                    'em':'',
                                    'ph':phone
                                },
                                customData: {
                                    'registration_method':'Email Registration'
                                }
                            }
                        }));
                    }
                }catch (e) {

                }
                // 登录成功，保存 token 到 localStorage 并刷新页面
                localStorage.setItem("token", data.data.token);
                location.reload();
            } else {
                // 登录失败，显示错误提示
                $(".Toastify2").show();
                $("#messageContent").text(data.message);
                setTimeout(function () {
                    $(".Toastify2").hide();
                }, 1000);
            }
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);
        }
    );
}
function forClose() {
    $("#forget").hide();
}
function closePopup1() {
    // 关闭弹窗
    const popup = document.querySelector('.success-popup');
    if (popup) {
        document.body.removeChild(popup);
    }
}
function closePopup2() {
    var customModal = document.getElementById('customModal');
    var overlayPop = document.getElementById("overlayPop")
    if (customModal) {
        document.body.removeChild(customModal);
        document.body.removeChild(overlayPop);
    }
}
function showTipPop() {
    // 创建自定义弹窗元素

    const customModal = `<div id="overlayPop"
    style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 500;"
    onclick="closePopup2()"></div>
    <div id="customModal" style="left: 50%;
transform: translateX(-50%);border-radius:20px 20px 0 0;position: fixed; bottom: min(30.333vw, 73.067px); width: min(100%, 428px); z-index: 1000; background-color:#620d18; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.2); z-index: 10000;" role="dialog">
<div style="display:flex;flex-direction: column;align-items: center">
<div class="popHeader" style="width:100%;color:#fff;font-size:18px;position:relative;display:flex;justify-content:center">
<span data-translate-key="Add to Home Screen">添加到主屏幕</span>
<button id="closeBtn1" onclick="closePopup2()" style="background:none; border:none; font-size:14px; color:#fff; cursor:pointer;position:absolute;right:0">X</button>
</div>
<div  style="color:#fff;margin:10px 0;font-size:14px;text-align:center">
<div style="display:flex;align-items:center;justify-content:center"><span data-translate-key="point down">点击下方的工具栏</span>
<img src="/image/common/upload.svg" style="width:23px;margin:0 5px">
</div>
<div style="display:flex;align-items:center;justify-content:center"><span data-translate-key="add select">并选择</span>
<img src="/image/common/add1.svg" style="width:23px;margin:0 5px"></div>




</div>
<span  style="color:#fff;font-size:14px" data-translate-key="Add to Home Screen">“添加到主屏幕”</span>
<div style="display: flex;flex-direction: column;background-color: #fff;width: 80%;border-radius:10px;padding:10px;margin-top:10px">
                            <div style="width: 100%;display: flex;justify-content: space-between;padding: 5px 10px;border-bottom: 1px solid #eee;">
                                <span data-translate-key="Add to Quick Note">添加到快速备忘录</span>
                                <img src="/image/common/note.svg" alt="" style="width:23px;">
                            </div>
                            <div style="width: 100%;display: flex;justify-content: space-between;padding: 5px 10px;border-bottom: 1px solid #eee;">
                                <span data-translate-key="Find on Page">在页面上查找</span>
                                <img src="/image/common/search.svg" alt="" style="width:20px;">
                            </div>
                            <div style="width: 100%;display: flex;justify-content: space-between;padding: 5px 10px;border: 3px solid red;border-radius: 10px;">
                                <span data-translate-key="Add to Home Screen">添加到主屏幕</span>
                                <img src="/image/common/add2.svg" alt="" style="width:20px;">
                            </div>
                            <div style="width: 100%;display: flex;justify-content: space-between;padding: 5px 10px;border-bottom: 1px solid #eee;">
                                <span data-translate-key="Markup">标记</span>
                                <img src="/image/common/notice.svg" alt="" style="width:23px;">
                            </div>
                        </div>

</div>
</div>
<style>
    #overlayPop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 500;
    }
   </style>
`;
    document.body.innerHTML += customModal;
    translatePage(langCode);

}
function showSuccessPopup(message, btnText) {
    // 创建弹窗
    const popup = `
        <div class="success-popup" style="position: fixed; top: 30%; left: 10%;width: 80%;
            background-color: #fff4f4; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            text-align: center; z-index: 1000;">
                <div style="width: 100%;display: flex;justify-content: flex-end;margin-bottom:20px">
        <svg class="close-icon" width="14" height="14" viewBox="0 0 14 14" fill="none"
            xmlns="http://www.w3.org/2000/svg" onclick="closePopup1()">
            <path
                d="M1.96868 13.4487L0.550781 12.0308L5.58158 7.00001L0.550781 2.00254L1.96868 0.584641L6.99948 5.61544L11.9969 0.584641L13.4148 2.00254L8.38405 7.00001L13.4148 12.0308L11.9969 13.4487L6.99948 8.41791L1.96868 13.4487Z"
                fill="black" />
        </svg>
    </div>
            <p>${message}</p>
            <button onclick="loginPop()"  style="background-color: #7c1820; color: #fff; padding: 10px 20px; 
                border: none; border-radius: 5px; cursor: pointer;width:100%;margin-top:20px" >${btnText}</button>
        </div>
    `;
    document.body.innerHTML += popup;
}
function loginPop() {
    // 移除当前的提示弹窗
    const popup = document.querySelector('.success-popup');
    if (popup) {
        popup.remove();
    }
    $("#userInfo").show();
    $("#loginInfo").show();
    $("#zcInfo").hide();
    document.getElementById('dltitle').style.color = '#7c1820';
    document.getElementById('zctitle').style.color = '#707f81';
    // 禁止页面滚动
    document.body.style.overflow = "hidden";

    // 设置焦点到弹出层
    $("#email").focus();
}
function forsubmit() {
    var foryzd = $('#forcanvas2').attr('data-code').toLowerCase(); // 存储的验证码转为小写
    var foryz = $("#foryz2").val().toLowerCase(); // 用户输入的验证码转为小写
    if (foryzd != foryz) {
        if (langCode == "vi") {
            $('#foryzText2').text('Mã xác minh không đúng');
        } else if (langCode == "zh") {
            $('#foryzText2').text('验证码不正确');
        } else {
            $('#foryzText2').text('Incorrect verification code');
        }
        $("#foryzText2").show();
        return false;
    } else {
        $("#foryzText2").hide();
    }
    var password = $("#forpassword").val();
    var qpassword = $("#forqpassword").val();
    var email = $("#foremail").val();
    if (!email) {
        if (langCode == "vi") {
            $('#foremailText').text(language['95']);
        } else if (langCode == "zh") {
            $('#foremailText').text('请输入您的电子邮件');
        } else {
            $('#foremailText').text('Please enter your email address');
        }
        $("#foremailText").show();
        return false;
    } else {
        $("#foremailText").hide();
    }
    let reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/;
    if (!reg.test(email)) {
        if (langCode == "vi") {
            $('#foremailText').text('Vui lòng nhập email hợp lệ');
        } else if (langCode == "zh") {
            $('#foremailText').text('请输入正确的电子邮件');
        } else {
            $('#foremailText').text('Please enter a valid email');
        }
        $("#foremailText").show();
        return false;
    } else {
        $("#foremailText").hide();
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#forpasswordText').text(language['25']);
        } else if (langCode == "zh") {
            $('#forpasswordText').text('密码必须至少有6个字符');
        } else {
            $('#forpasswordText').text('The password must be at least 6 characters long');
        }
        $("#forpasswordText").show();
        return false;
    } else {
        $("#forpasswordText").hide();
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#forpasswordText').text(language['26']);
        } else if (langCode == "zh") {
            $('#forpasswordText').text('密码必须包含大写和小写');
        } else {
            $('#forpasswordText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#forpasswordText").show();
        return false;
    } else {
        $("#forpasswordText").hide();
    }
    if (!qpassword) {
        if (langCode == "vi") {
            $('#forqpasswordsText').text(language['24']);
        } else if (langCode == "zh") {
            $('#forqpasswordsText').text('请输入确认密码');
        } else {
            $('#forqpasswordsText').text('Please enter the confirmation password');
        }
        $("#forqpasswordsText").show();
        return false;
    } else {
        $("#forqpasswordsText").hide();
        // }
        if (qpassword != password) {
            if (langCode == "vi") {
                $('#forqpasswordsText').text(language['27']);
            } else if (langCode == "zh") {
                $('#forqpasswordsText').text('输入密码不匹配');
            } else {
                $('#forqpasswordsText').text('The input password does not match');
            }
            $("#forqpasswordsText").show();
            return false;
        } else {
            $("#forqpasswordsText").hide();
        }
        sendRequest(
            "POST",
            APIURL + "/api/Login/verifyEmailPassword",
            JSON.stringify({
                email: email,
                password: password,
                repassword: qpassword
            }),
            null, // 不需要额外的 headers
            function (data) {
                if (data.data.messageCode == "发送成功！") {
                    // 隐藏错误提示框
                    $(".Toastify2").hide();
                    // 清空输入框
                    $("#forpassword").val('');
                    $("#forqpassword").val('');
                    $("#foremail").val('');
                    // 隐藏提交按钮
                    $("#forget").hide();
                    // 提交成功后刷新验证码
                    code_fordraw();
                    code_fordraw2();
                    // 显示成功弹窗
                    let btnText = 'Xác nhận';

                    if (langCode == "vi") {
                        btnText = 'Xác nhận'; // 提示用户选择省份
                    } else if (langCode == "zh") {
                        btnText = '确认'; // 提示用户选择省份
                    } else {
                        btnText = 'Confirm'; // 提示用户选择省份
                    }

                    const alertMessage = translations[langCode]?.["email send"] || 'Email đã được gửi thành công, vui lòng vào hộp thư của bạn để hoàn tất xác minh';
                    showSuccessPopup(alertMessage, btnText);
                } else {
                    // 显示错误提示
                    $(".Toastify2").show();
                    $("#messageContent").text(data.message);
                    setTimeout(function () {
                        $(".Toastify2").hide();
                    }, 1000);
                    // 提交成功后刷新验证码
                    code_fordraw();
                    code_fordraw2();
                }
            },
            function (xhr, status, error) {
                // 错误回调
                console.error('请求失败:', error);
            }
        );
    }
}
// 格式化函数
function formatAmount(amount) {
    const number = Math.floor(Number(amount));
    return number.toLocaleString('en');
}

var payTypeContentDom = jQuery("#payTypeContent");
function payType() {
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";

        // 设置焦点到弹出层
        $("#email").focus();

    } else {
        window.location.href = '/paymentMethods.html';
    }
}
function payTypeClose() {
    $("#payType").hide()
}



function payNumberBack() {
    if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
    }
    $("#payNumber").hide();
}
function tab(id, amount, originPrice) {
    if (amount) {
        // console.log('固定充值')
        // $("#payNumberText").text(language['33'] + originPrice);
        $("#payNumberText").text(language['33']);
        $("#amount").val(amount)
    } else {
        // console.log('自定义')

        if (!payTypeNumber) {
            $("#payNumberText").text(language['33']);
            $("#amount").val(payTypeNumber)
        } else {
            // $("#payNumberText").text(language['33'] + payTypeNumber);
            $("#payNumberText").text(language['33']);
            $("#amount").val(payTypeNumber)
        }

    }
    jQuery.each(payNmberlist[xb].list, function (ids, item) {
        // $('#number' + item.id).removeClass('!bg-[#8554FB]');
        // $('#number' + item.id).removeClass('!text-white');
        $('#number' + item.id).css({
            'background-color': '#fff', // 设置背景色为紫色
            'color': '#666',              // 设置字体颜色为白色
            'border': '1px solid #eee'         // 设置圆角
        });
    });
    $('#number1000000').removeClass('!bg-[#8554FB]');
    $('#number1000000').removeClass('!text-white');
    if (id == 1000000) {
        // console.log(11111)
        $('#number1000000').addClass('!bg-[#8554FB]');
        $('#number1000000').addClass('!text-white');
    } else {
        // console.log(22222)
        // $('#number' + id).addClass('!bg-[#8554FB]');
        // $('#number' + id).addClass('!text-white');
        $('#number' + id).css({
            'background-color': '#7b030a', // 设置背景色
            'color': 'white',              // 设置字体颜色为白色
        });
    }
    payTypeNumber = originPrice;
    translatePage(langCode);

}
$('#amount').on('input', function () {
    jQuery.each(payNmberlist[xb].list, function (ids, item) {
        $('#number' + item.id).css({
            'background-color': '#fff', // 设置背景色为紫色
            'color': '#666',              // 设置字体颜色为白色
            'border': '1px solid #eee'         // 设置圆角
        });
        // $('#number' + item.id).removeClass('!bg-[#8554FB]');
        // $('#number' + item.id).removeClass('!text-white');
    });
    $('#number1000000').addClass('!bg-[#8554FB]');
    $('#number1000000').addClass('!text-white');
    var amount = $("#amount").val()
    // $("#payNumberText").text(language['33'] + amount)
    $("#payNumberText").text(language['33'])
    payTypeNumber = originPrice;
});

// 定义一个函数来动态设置按钮的背景颜色
function getButtonBackgroundColor() {
    return pagePath == '/paymentMethods.html' ? '#eadf77' : '#fff'; // 黄色或白色
}
if (token) {
    var userContent = "";
    sendRequest(
        "POST",
        APIURL + "/api/User/getMember",
        {}, // 请求数据为空对象
        {
            'token': token // 将 token 放入 headers 中
        },
        function (data) {
            if (data.code != 301) {
                // 清空当前内容
                $("#isUser").empty();

                // 获取用户信息
                id = data.data.id;
                $('#tobar .gap-1').hide();
                userContent += `
                    <div data-v-b1df64fc="" class="flex absolute left-1/2 -translate-x-1/2 h-full items-center justify-center" style="width:60px;height:63px;top:5">
                        <button data-v-b1df64fc="" type="button" class="flex items-center rounded-full text-white" onclick="payType()" style="background-color:${getButtonBackgroundColor()};padding:19px;border-radius:50%">
                            <img src="/image/index/Vector.svg" class="icon transition-colors duration-300" alt="Icon" width="30" height="30">
                        </button>
                        <div data-v-b1df64fc="" class="flex items-center gap-1 absolute -top-1/3" style="top:-51%;background-color:#fdf4f4;border-radius:30px;height:22px;display:flex;align-items:center;justify-content:center;padding:3px 13px">
                            <img src="/image/index/coin.svg" alt="Icon" style="width:16px;height:16px">
                            <span class="relative text-inherit" id="userMoney" style="font-size:10px;color:#74171e">
                                ${formatAmount(data.data.money)}
                            </span>
                        </div>
                    </div>
                `;

                // 将生成的 HTML 内容插入到页面中
                userContentDom.append(userContent);
            } else {
                // 如果返回码为 301，清除本地存储的 token
                localStorage.removeItem("token");
                token = "";
            }

            // 调用页面翻译函数
            translatePage(langCode);
        },
        function (xhr, status, error) {
            // 错误回调
            // ;
            // alert(alertMessage + " " + xhr.status + " " + xhr.statusText);
            console.error('请求失败:', error);
        }
    );
}
function toBlog() {
    $("#kjdl").show();
    //localStorage.removeItem("token")
    // if (!token) {
    //     $("#userInfo").show();
    //     $("#loginInfo").show();
    //     $("#zcInfo").hide();
    //     document.getElementById('dltitle').style.color = '#7c1820';
    //     document.getElementById('zctitle').style.color = '#707f81';
    //     // 禁止页面滚动
    //     document.body.style.overflow = "hidden";

    //     // 设置焦点到弹出层
    //     $("#email").focus();

    // } else {
        window.location.href = "/blog/index.html";
    // }
}
function user() {
    $("#kjdl").show();
    //localStorage.removeItem("token")
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";

        // 设置焦点到弹出层
        $("#email").focus();

    } else {
        window.location.href = "/profile.html";
    }
}
function support() {
    //localStorage.removeItem("token")
    if (!token) {
        $("#userInfo").show();
        $("#loginInfo").show();
        $("#zcInfo").hide();
        document.getElementById('dltitle').style.color = '#7c1820';
        document.getElementById('zctitle').style.color = '#707f81';
        // 禁止页面滚动
        document.body.style.overflow = "hidden";

        // 设置焦点到弹出层
        $("#email").focus();

    } else {
        window.location.href = "/support.html";
    }
}
var forType = 1;
function logintab(type) {
    forType = type;
    if (type == 1) {
        // 清空手机号登录相关的输入框
        $("#phone").val(""); // 清空手机号输入框
        $("#phoneLoginText").hide(); // 隐藏手机号相关的提示信息
        $("#code").val(""); // 清空验证码输入框（如果有）
        $("#codeLoginText").hide(); // 隐藏验证码相关的提示信息
        $("#emailLoginSubmit").show();
        $("#phoneLoginSubmit").hide();
        $("#loginPhoneShow").hide();
        $("#loginEmailShow").show();
        $('#password_box_wrap').show();
        $("#ForCodeShow2").hide();
        $("#yzm_box_wrap").hide();
        $("#forgot_box_wrap").show();

        document.getElementById('typeLoginOneClass').style.color = '#7c1820';
        document.getElementById('typeLoginTwoClass').style.color = '#707f81';

        $("#loginEmaliSvg").attr("src", "../image/email_z.svg")
        $("#loginPhoneSvg").attr("src", "../image/phone.svg")
    }
    if (type == 2) {
        // 清空邮箱登录相关的输入框
        $("#email").val(""); // 清空邮箱输入框
        $("#emailLoginText").hide(); // 隐藏邮箱相关的提示信息
        $("#emailLoginSubmit").hide();
        $("#phoneLoginSubmit").show();
        $("#loginPhoneShow").show();
        $("#loginEmailShow").hide();
        $('#password_box_wrap').hide();
        $("#ForCodeShow2").show();
        $("#yzm_box_wrap").show();
        $("#forgot_box_wrap").hide();
        document.getElementById('typeLoginOneClass').style.color = '#707f81';
        document.getElementById('typeLoginTwoClass').style.color = '#7c1820';
        $("#loginEmaliSvg").attr("src", "../image/email.png")
        $("#loginPhoneSvg").attr("src", "../image/phone_z.svg")

    }
}
function zctab(type) {
    code_draw();
    // 清空所有输入框内容
    $("#zcemail").val(""); // 清空邮箱输入框
    $("#zcphone").val(""); // 清空手机号输入框
    $("#zccode").val(""); // 清空验证码输入框
    $("#passwords").val(""); // 清空密码输入框
    $("#qpasswords").val(""); // 清空确认密码输入框
    $("#name").val(""); // 清空昵称输入框

    // 隐藏所有提示信息
    $("#emailZcText").hide(); // 隐藏邮箱提示
    $("#phoneZcText").hide(); // 隐藏手机号提示
    $("#codeZcText").hide(); // 隐藏验证码提示
    $("#zcpasswordText").hide(); // 隐藏密码提示
    $("#qpasswordsText").hide(); // 隐藏确认密码提示
    $("#nameText").hide(); // 隐藏昵称提示
    $("#likeMessage").hide(); // 隐藏协议提示
    $("#byMessage").hide(); // 隐藏协议提示

    if (type == 1) {

        $("#zcStyle").show();
        $("#zcPhoneStyle").hide();
        $("#ZcPhoneShow").hide();
        $("#ZcCodeShow").hide();
        $("#ZcEmailShow").show();
        document.getElementById('typeZcOneClass').style.color = '#7c1820';
        document.getElementById('typeZcTwoClass').style.color = '#707f81';

        $("#ZcEmaliSvg").attr("src", "../image/email_z.svg")
        $("#ZcPhoneSvg").attr("src", "../image/phone.svg")
    }
    if (type == 2) {

        $("#zcStyle").hide();
        $("#zcPhoneStyle").show();
        $("#ZcPhoneShow").show();
        $("#ZcCodeShow").show();
        $("#ZcEmailShow").hide();
        document.getElementById('typeZcOneClass').style.color = '#707f81';
        document.getElementById('typeZcTwoClass').style.color = '#7c1820';

        $("#ZcEmaliSvg").attr("src", "../image/email.png")
        $("#ZcPhoneSvg").attr("src", "../image/phone_z.svg")
    }

}
var is_zcCode = 1;
function zcCode() {

    if (is_zcCode == 1) {
        var phone = $("#zcphone").val();
        if (!phone) {
            if (langCode == "vi") {
                $('#phoneZcText').text(language['140']);
            } else if (langCode == "zh") {
                $('#phoneZcText').text('请输入电话*');
            } else {
                $('#phoneZcText').text('Please enter phone number*');
            }
            $("#phoneZcText").show();
            return false;
        } else {
            $("#phoneZcText").hide();
        }
        var zcyzd = $('#canvas').attr('data-code').toLowerCase();
        var zcyz = $("#zcyz").val().toLowerCase();
        // console.log(zcyz, "zcyz")
        // console.log(zcyzd, "zcyzd")
        if (zcyz != zcyzd) {
            if (langCode == "vi") {
                $('#zcyzText').text('Mã xác minh không đúng');
            } else if (langCode == "zh") {
                $('#zcyzText').text('验证码不正确');
            } else {
                $('#zcyzText').text('Incorrect verification code');
            }
            $("#zcyzText").show();
            return false;
        } else {
            $("#zcyzText").hide();
        }
        // console.log("走到了")
        var zcM = 60;
        sendRequest(
            "POST",
            APIURL + "/api/login/sendSms",
            JSON.stringify({
                type: "register",
                phone: phone,
            }),

            null, // 不需要额外的 headers
            function (data) {
                if (data.code == 501) {
                    // 如果返回码为 501，显示错误信息
                    $("#phoneZcText").text(data.message);
                    $("#phoneZcText").show();
                } else {
                    // 如果返回码不是 501，启动验证码倒计时


                    is_zcCode = 0;
                    $("#ZccodeSubmit").text(zcM + " s");

                    // 设置倒计时
                    codeTime = setInterval(function () {
                        if (zcM == 0) {
                            // 倒计时结束，恢复按钮状态
                            $("#ZccodeSubmit").text(language['142']);
                            is_zcCode = 1;
                            clearInterval(codeTime);
                        } else {
                            // 倒计时继续
                            zcM--;
                            $("#ZccodeSubmit").text(zcM + " s");
                            is_zcCode = 0;
                        }
                    }, 1000);
                }
            },
            function (xhr, status, error) {
                // 错误回调
                console.error('请求失败:', error);
            }
        );
    }

}
function zcPhoneSubmit() {
    var password = $("#passwords").val();
    var qpassword = $("#qpasswords").val();
    var phone = $("#zcphone").val();
    var code = $("#zccode").val();
    var name = $("#name").val();
    $("#nameText").hide();
    $("#phoneZcText").hide();
    $("#codeZcText").hide();
    $("#zcpasswordText").hide();
    $("#qpasswordsText").hide();
    $("#likeMessage").hide();
    $("#byMessage").hide();
    if (!name) {
        if (langCode == "vi") {
            $('#nameText').text(language['101']);
        } else if (langCode == "zh") {
            $('#nameText').text('请输入昵称*');
        } else {
            $('#nameText').text('Please enter an alias*');
        }
        $("#nameText").show();
        return false;
    } else {
        $("#nameText").hide();
    }
    if (!phone) {

        if (langCode == "vi") {
            $('#phoneZcText').text(language['140']);
        } else if (langCode == "zh") {
            $('#phoneZcText').text('请输入电话*');
        } else {
            $('#phoneZcText').text('Please enter phone number*');
        }
        $("#phoneZcText").show();
        return false;
    } else {
        $("#phoneZcText").hide();
    }
    if (!code) {
        if (langCode == "vi") {
            $('#codeForText').text(language['141']);
        } else if (langCode == "zh") {
            $('#codeForText').text('请输入验证码*');
        } else {
            $('#codeForText').text('Please enter the verification code*');
        }
        $("#codeZcText").show();
        return false;
    } else {
        $("#codeZcText").hide();
    }

    if (!password) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['23']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('请输入您的密码');
        } else {
            $('#zcpasswordText').text('Please enter your password');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['25']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('密码必须至少有6个字符');
        } else {
            $('#zcpasswordText').text('The password must be at least 6 characters long');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#zcpasswordText').text(language['26']);
        } else if (langCode == "zh") {
            $('#zcpasswordText').text('密码必须包含大写和小写');
        } else {
            $('#zcpasswordText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#zcpasswordText").show();
        return false;
    } else {
        $("#zcpasswordText").hide();
    }
    if (!qpassword) {
        if (langCode == "vi") {
            $('#qpasswordsText').text(language['24']);
        } else if (langCode == "zh") {
            $('#qpasswordsText').text('请输入确认密码');
        } else {
            $('#qpasswordsText').text('Please enter the confirmation password');
        }
        $("#qpasswordsText").show();
        return false;
    } else {
        $("#qpasswordsText").hide();
    }
    if (qpassword != password) {
        if (langCode == "vi") {
            $('#qpasswordsText').text(language['27']);
        } else if (langCode == "zh") {
            $('#qpasswordsText').text('输入密码不匹配');
        } else {
            $('#qpasswordsText').text('The input password does not match');
        }
        $("#qpasswordsText").show();
        return false;
    } else {
        $("#qpasswordsText").hide();
    }
    if (!$('#like').is(':checked')) {
        if (langCode == "vi") {
            $('#likeMessage').text(language['30']);
        } else if (langCode == "zh") {
            $('#likeMessage').text('请选择同意条款');
        } else {
            $('#likeMessage').text('Please select the agreement terms');
        }
        $("#likeMessage").show();
        return false;
    } else {
        $("#likeMessage").hide();
    }
    if (!$('#by').is(':checked')) {
        if (langCode == "vi") {
            $('#byMessage').text(language['30']);
        } else if (langCode == "zh") {
            $('#byMessage').text('请选择同意条款');
        } else {
            $('#byMessage').text('Please select the agreement terms');
        }
        $("#byMessage").show();
        return false;
    } else {
        $("#byMessage").hide();
    }
    $('#zcPhoneStyle').attr('disabled', true);
    sendRequest(
        "POST",
        APIURL + "/api/login/phone_register",
        JSON.stringify({
            nickname: name,
            phone: phone,
            code: code,
            password: password,
            repassword: qpassword,
            state: localStorage.getItem('userId')
        }),
        null, // 不需要额外的 headers
        function (data) {
            if (data.code == 200) {
                try {
                    localStorage.setItem('userPhone',phone);
                    document.dispatchEvent(new CustomEvent('CompleteRegistration', {
                        detail: {
                            userData: {
                                'em':'',
                                'ph':phone
                            },
                            customData: {
                                'registration_method':'Email Registration'
                            }
                        }
                    }));
                }catch (e) {
                    console.error(e)
                }
                // 注册成功
                $("#zcInfo").hide(); // 隐藏注册信息区域
                $(".Toastify1").show(); // 显示成功提示
                $(".Toastify2").hide(); // 隐藏错误提示
                $("#loginInfo").show(); // 显示登录信息区域
                // 清空输入框
                $("#passwords").val('');
                $("#qpasswords").val('');
                $("#zcemail").val('');
                $("#name").val('');
                // 隐藏成功提示
                setTimeout(function () {
                    $(".Toastify1").hide();
                }, 1000);
            } else {
                // 注册失败
                $(".Toastify2").show(); // 显示错误提示
                $("#messageContent").text(data.message); // 设置错误信息
                // 隐藏错误提示
                setTimeout(function () {
                    $(".Toastify2").hide();
                }, 1000);
            }
            // 重新启用注册按钮
            $('#zcPhoneStyle').attr('disabled', false);
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);
            // 重新启用注册按钮
            $('#zcPhoneStyle').attr('disabled', false);
        }
    );

}

function forgot() {
    code_fordraw();
    $("#forget").show();
    if (forType == 1) {
        $("#forphone").hide();
        $("#foremail").show();
        $("#forStyle").show();
        $("#forPhoneStyle").hide();
        $("#ForPhoneShow").hide();
        $("#ForCodeShow").hide();
        $("#ForEmailShow").show();
        $("#typeForOneClass").addClass("!text-black")
        $("#typeForOneClass").addClass("!text-white")
        $("#typeForTwoClass").removeClass("!text-black")
        $("#typeForTwoClass").removeClass("!text-white")
        $("#ForEmaliSvg").attr("src", "../image/email_z.svg")
        $("#ForPhoneSvg").attr("src", "../image/phone.svg")
    }
    if (forType == 2) {
        $("#forphone").show();
        $("#foremail").hide();
        $("#forStyle").hide();
        $("#forPhoneStyle").show();
        $("#ForPhoneShow").show();
        $("#ForCodeShow").show();
        $("#ForEmailShow").hide();
        $("#typeForOneClass").removeClass("!text-black")
        $("#typeForOneClass").removeClass("!text-white")
        $("#typeForTwoClass").addClass("!text-black")
        $("#typeForTwoClass").addClass("!text-white")
        $("#ForEmaliSvg").attr("src", "../image/email.svg")
        $("#ForPhoneSvg").attr("src", "../image/phone_z.svg")
    }
}
function fortab(type) {
    if (type == 1) {
        $("#forphone").hide();
        $("#foremail").show();
        $("#forStyle").show();
        $("#forPhoneStyle").hide();
        $("#ForPhoneShow").hide();
        $("#ForCodeShow").hide();
        $("#ForEmailShow").show();
        $("#typeForOneClass").addClass("!text-black")
        $("#typeForOneClass").addClass("!text-white")
        $("#typeForTwoClass").removeClass("!text-black")
        $("#typeForTwoClass").removeClass("!text-white")
        $("#ForEmaliSvg").attr("src", "../image/email_z.svg")
        $("#ForPhoneSvg").attr("src", "../image/phone.svg")
    }
    if (type == 2) {
        $("#forphone").show();
        $("#foremail").hide();
        $("#forStyle").hide();
        $("#forPhoneStyle").show();
        $("#ForPhoneShow").show();
        $("#ForCodeShow").show();
        $("#ForEmailShow").hide();
        $("#typeForOneClass").removeClass("!text-black")
        $("#typeForOneClass").removeClass("!text-white")
        $("#typeForTwoClass").addClass("!text-black")
        $("#typeForTwoClass").addClass("!text-white")
        $("#ForEmaliSvg").attr("src", "../image/email.svg")
        $("#ForPhoneSvg").attr("src", "../image/phone_z.svg")
    }

}
var is_forCode = 1
function forCode() {
    if (is_forCode == 1) {
        var phone = $("#forphone").val();
        if (!phone) {
            if (langCode == "vi") {
                $('#forphoneText').text(language['140']);
            } else if (langCode == "zh") {
                $('#forphoneText').text('请输入电话*');
            } else {
                $('#forphoneText').text('Please enter phone number*');
            }
            $("#forphoneText").show();
            return false;
        } else {
            $("#forphoneText").hide();
        }
        var foryzd = $('#forcanvas').attr('data-code').toLowerCase(); 
        var foryz = $("#foryz").val().toLowerCase();
        if (foryzd != foryz) {
            if (langCode == "vi") {
                $('#foryzText').text('Mã xác minh không đúng');
            } else if (langCode == "zh") {
                $('#foryzText').text('验证码不正确');
            } else {
                $('#foryzText').text('Incorrect verification code');
            }
            $("#foryzText").show();
            return false;
        } else {
            $("#foryzText").hide();
        }

        sendRequest(
            "POST",
            APIURL + "/api/login/sendSms",
            JSON.stringify({
                type: "password_recovery",
                phone: phone,
            }),
            null, // 不需要额外的 headers
            function (data) {
                if (data.code != 200) {
                    // 如果返回码不是 200，显示错误信息
                    $("#foryzText").text(data.message);
                    $("#foryzText").show();
                } else {
                    // 如果返回码是 200，启动验证码倒计时
                    is_forCode = 0;
                    var zcM = 60; // 倒计时时间设置为 60 秒
                    $("#ForcodeSubmit").text(zcM + " s");

                    // 设置倒计时逻辑
                    codeTime = setInterval(function () {
                        if (zcM == 0) {
                            // 倒计时结束，恢复按钮文本并清除定时器
                            $("#ForcodeSubmit").text(language['142']);
                            is_forCode = 1;
                            clearInterval(codeTime);
                        } else {
                            // 倒计时继续，递减时间并更新按钮文本
                            zcM--;
                            is_forCode = 0;
                            $("#ForcodeSubmit").text(zcM + " s");
                        }
                    }, 1000);
                }
            },
            function (xhr, status, error) {
                // 错误回调
                console.error('请求失败:', error);
            }
        );
    }
}
function forCode2() {
    if (is_forCode == 1) {
        var phone = $("#phone").val();
        console.log(phone)
        if (!phone) {
            if (langCode == "vi") {
                $('#phoneLoginText').text(language['140']);
            } else if (langCode == "zh") {
                $('#phoneLoginText').text('请输入电话*');
            } else {
                $('#phoneLoginText').text('Please enter phone number*');
            }
            $("#phoneLoginText").show();
            return false;
        } else {
            $("#phoneLoginText").hide();
        }
        var foryzd = $('#forcanvas').attr('data-code').toLowerCase();
        var foryz = $("#foryz").val().toLowerCase();

        if (foryzd != foryz) {
            if (langCode == "vi") {
                $('#foryzText').text('Mã xác minh không đúng');
            } else if (langCode == "zh") {
                $('#foryzText').text('验证码不正确');
            } else {
                $('#foryzText').text('Incorrect verification code');
            }
            $("#foryzText").show();
            return false;
        } else {
            $("#foryzText").hide();
        }

        sendRequest(
            "POST",
            APIURL + "/api/login/sendSms",
            JSON.stringify({
                type: "mobile_login",
                phone: phone,
            }),
            null, // 不需要额外的 headers
            function (data) {
                if (data.code != 200) {
                    // 如果返回码不是 200，显示错误信息
                    $("#foryzText").text(data.message);
                    $("#foryzText").show();
                } else {
                    // 如果返回码是 200，启动验证码倒计时
                    is_forCode = 0;
                    var zcM = 60; // 倒计时时间设置为 60 秒
                    $("#ForcodeSubmit2").text(zcM + " s");

                    // 设置倒计时逻辑
                    codeTime = setInterval(function () {
                        if (zcM == 0) {
                            // 倒计时结束，恢复按钮文本并清除定时器
                            $("#ForcodeSubmit2").text(language['142']);
                            is_forCode = 1;
                            clearInterval(codeTime);
                        } else {
                            // 倒计时继续，递减时间并更新按钮文本
                            zcM--;
                            is_forCode = 0;
                            $("#ForcodeSubmit2").text(zcM + " s");
                        }
                    }, 1000);
                }
            },
            function (xhr, status, error) {
                // 错误回调
                console.error('请求失败:', error);
            }
        );
    }
}
function forPhonesubmit() {
    var password = $("#forpassword").val();
    var qpassword = $("#forqpassword").val();
    var phone = $("#forphone").val();
    var code = $("#forcode").val();
    if (!phone) {
        if (langCode == "vi") {
            $('#forphoneText').text(language['140']);
        } else if (langCode == "zh") {
            $('#forphoneText').text('请输入电话*');
        } else {
            $('#forphoneText').text('Please enter phone number*');
        }
        $("#forphoneText").show();
        return false;
    } else {
        $("#forphoneText").hide();
    }
    if (!code) {
        if (langCode == "vi") {
            $('#codeForText').text(language['141']);
        } else if (langCode == "zh") {
            $('#codeForText').text('请输入验证码*');
        } else {
            $('#codeForText').text('Please enter the verification code*');
        }
        $("#codeForText").show();
        return false;
    } else {
        $("#codeForText").hide();
    }
    if (password.length < 6) {
        if (langCode == "vi") {
            $('#forpasswordText').text(language['25']);
        } else if (langCode == "zh") {
            $('#forpasswordText').text('密码必须至少有6个字符');
        } else {
            $('#forpasswordText').text('The password must be at least 6 characters long');
        }
        $("#forpasswordText").show();
        return false;
    } else {
        $("#forpasswordText").hide();
    }
    let rule = /[A-Z]/
    if (!rule.test(password)) {
        if (langCode == "vi") {
            $('#forpasswordText').text(language['26']);
        } else if (langCode == "zh") {
            $('#forpasswordText').text('密码必须包含大写和小写');
        } else {
            $('#forpasswordText').text('Password must contain both uppercase and lowercase characters');
        }
        $("#forpasswordText").show();
        return false;
    } else {
        $("#forpasswordText").hide();
    }
    if (!qpassword) {
        if (langCode == "vi") {
            $('#forqpasswordsText').text(language['24']);
        } else if (langCode == "zh") {
            $('#forqpasswordsText').text('请输入确认密码');
        } else {
            $('#forqpasswordsText').text('Please enter the confirmation password');
        }
        $("#forqpasswordsText").show();
        return false;
    } else {
        $("#forqpasswordsText").hide();
    }
    if (qpassword != password) {
        if (langCode == "vi") {
            $('#forqpasswordsText').text(language['27']);
        } else if (langCode == "zh") {
            $('#forqpasswordsText').text('输入密码不匹配');
        } else {
            $('#forqpasswordsText').text('The input password does not match');
        }
        $("#forqpasswordsText").show();
        return false;
    } else {
        $("#forqpasswordsText").hide();
    }
    sendRequest(
        "POST",
        APIURL + "/api/login/phone_verifyEmailPassword",
        JSON.stringify({
            phone: phone,
            code: code,
            password: password,
        }),
        null, // 不需要额外的 headers
        function (data) {
            if (data.code == 200) {
                // 验证成功
                $(".Toastify2").hide(); // 隐藏错误提示框
                $("#forpassword").val(''); // 清空密码输入框
                $("#forqpassword").val(''); // 清空确认密码输入框
                $("#foremail").val(''); // 清空邮箱输入框
                $("#forget").hide(); // 隐藏提交按钮
            } else {
                // 验证失败
                $(".Toastify2").show(); // 显示错误提示框
                $("#messageContent").text(data.message); // 设置错误信息
                setTimeout(function () {
                    $(".Toastify2").hide(); // 1秒后隐藏错误提示框
                }, 1000);
            }
        },
        function (xhr, status, error) {
            // 错误回调
            console.error('请求失败:', error);
        }
    );

}
$(function () {
    code_draw();
    // 点击后刷新验证码
    $("#canvas").on('click', function () {
        code_draw();
    })



    code_fordraw();
    // 点击后刷新验证码
    $("#forcanvas").on('click', function () {
        code_fordraw();
    })

    code_fordraw2();
    // 点击后刷新验证码
    $("#forcanvas2").on('click', function () {
        code_fordraw2();
    })


})


function code_draw() {
    var canvas_width = 100;
    var canvas_height = 50;
    var canvas = document.getElementById("canvas"); //获取到canvas的对象，演员
    var context = canvas.getContext("2d"); //获取到canvas画图的环境，演员表演的舞台
    canvas.width = canvas_width;
    canvas.height = canvas_height;
    var sCode = "A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0"; //取值范围
    var aCode = sCode.split(",");
    var aLength = aCode.length; //获取到数组的长度
    var value = [];
    for (var i = 0; i <= 3; i++) {
        var j = Math.floor(Math.random() * aLength); //获取到随机的索引值
        var deg = Math.random() * 30 * Math.PI / 180; //产生0~30之间的随机弧度
        var txt = aCode[j]; //得到随机的一个内容
        value[i] = txt.toLowerCase();
        var x = 10 + i * 20; //文字在canvas上的x坐标
        var y = 20 + Math.random() * 8; //文字在canvas上的y坐标
        context.font = "bold 23px 微软雅黑";

        context.translate(x, y);
        context.rotate(deg);

        context.fillStyle = code_randomColor();
        context.fillText(txt, 0, 0);

        context.rotate(-deg);
        context.translate(-x, -y);
    }
    // 将生成的值以属性的方法添加到元素
    value = value.join("");
    $('#canvas').attr('data-code', value)
    //验证码上显示线条
    for (var i = 0; i <= 5; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        context.moveTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.lineTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.stroke();
    }
    //验证码上显示小点
    for (var i = 0; i <= 30; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        var x = Math.random() * canvas_width;
        var y = Math.random() * canvas_height;
        context.moveTo(x, y);
        context.lineTo(x + 1, y + 1);
        context.stroke();
    }
}
function code_fordraw() {
    var canvas_width = 100;
    var canvas_height = 50;
    var canvas = document.getElementById("forcanvas"); //获取到canvas的对象，演员
    var context = canvas.getContext("2d"); //获取到canvas画图的环境，演员表演的舞台
    canvas.width = canvas_width;
    canvas.height = canvas_height;
    var sCode = "A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0"; //取值范围
    var aCode = sCode.split(",");
    var aLength = aCode.length; //获取到数组的长度
    var value = [];
    for (var i = 0; i <= 3; i++) {
        var j = Math.floor(Math.random() * aLength); //获取到随机的索引值
        var deg = Math.random() * 30 * Math.PI / 180; //产生0~30之间的随机弧度
        var txt = aCode[j]; //得到随机的一个内容
        value[i] = txt.toLowerCase();
        var x = 10 + i * 20; //文字在canvas上的x坐标
        var y = 20 + Math.random() * 8; //文字在canvas上的y坐标
        context.font = "bold 23px 微软雅黑";

        context.translate(x, y);
        context.rotate(deg);

        context.fillStyle = code_randomColor();
        context.fillText(txt, 0, 0);

        context.rotate(-deg);
        context.translate(-x, -y);
    }
    // 将生成的值以属性的方法添加到元素
    value = value.join("");
    $('#forcanvas').attr('data-code', value)
    //验证码上显示线条
    for (var i = 0; i <= 5; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        context.moveTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.lineTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.stroke();
    }
    //验证码上显示小点
    for (var i = 0; i <= 30; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        var x = Math.random() * canvas_width;
        var y = Math.random() * canvas_height;
        context.moveTo(x, y);
        context.lineTo(x + 1, y + 1);
        context.stroke();
    }
}
function code_fordraw2() {
    var canvas_width = 100;
    var canvas_height = 50;
    var canvas = document.getElementById("forcanvas2"); //获取到canvas的对象，演员
    var context = canvas.getContext("2d"); //获取到canvas画图的环境，演员表演的舞台
    canvas.width = canvas_width;
    canvas.height = canvas_height;
    var sCode = "A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0"; //取值范围
    var aCode = sCode.split(",");
    var aLength = aCode.length; //获取到数组的长度
    var value = [];
    for (var i = 0; i <= 3; i++) {
        var j = Math.floor(Math.random() * aLength); //获取到随机的索引值
        var deg = Math.random() * 30 * Math.PI / 180; //产生0~30之间的随机弧度
        var txt = aCode[j]; //得到随机的一个内容
        value[i] = txt.toLowerCase();
        var x = 10 + i * 20; //文字在canvas上的x坐标
        var y = 20 + Math.random() * 8; //文字在canvas上的y坐标
        context.font = "bold 23px 微软雅黑";

        context.translate(x, y);
        context.rotate(deg);

        context.fillStyle = code_randomColor();
        context.fillText(txt, 0, 0);

        context.rotate(-deg);
        context.translate(-x, -y);
    }
    // 将生成的值以属性的方法添加到元素
    value = value.join("");
    $('#forcanvas2').attr('data-code', value)
    //验证码上显示线条
    for (var i = 0; i <= 5; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        context.moveTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.lineTo(Math.random() * canvas_width, Math.random() * canvas_height);
        context.stroke();
    }
    //验证码上显示小点
    for (var i = 0; i <= 30; i++) {
        context.strokeStyle = code_randomColor();
        context.beginPath();
        var x = Math.random() * canvas_width;
        var y = Math.random() * canvas_height;
        context.moveTo(x, y);
        context.lineTo(x + 1, y + 1);
        context.stroke();
    }
}
function code_randomColor() { //得到随机的颜色值
    var r = Math.floor(Math.random() * 256);
    var g = Math.floor(Math.random() * 256);
    var b = Math.floor(Math.random() * 256);
    return "rgb(" + r + "," + g + "," + b + ")";
}
const appId = '3064073218220404843'; // 替换为实际的 Zalo App ID
const redirectUri = 'https://mgboxadm.com/api/login/zaloCallBack'; // 替换为实际的回调 URL 不用变 需要些域名变量

function base64URLEncode(buffer) {
    return btoa(String.fromCharCode.apply(null, new Uint8Array(buffer)))
        .replace(/\+/g, '-')
        .replace(/\//g, '_')
        .replace(/=+$/, '');
}

async function generateCodeVerifierAndChallenge() {
    const array = new Uint8Array(32);
    window.crypto.getRandomValues(array);
    const codeVerifier = base64URLEncode(array);
    const encoder = new TextEncoder();
    const data = encoder.encode(codeVerifier);
    const digest = await window.crypto.subtle.digest('SHA-256', data);
    const codeChallenge = base64URLEncode(digest);
    return { codeVerifier, codeChallenge };
}

function zalo() {
    const { codeVerifier, codeChallenge } = generateCodeVerifierAndChallenge();
    sessionStorage.setItem('code_verifier', codeVerifier);

    // 生成的密钥不要去掉 这里传参都关键
    const state = codeVerifier;
    const zaloAuthUrl = `https://oauth.zaloapp.com/v4/permission?app_id=${appId}&redirect_uri=${encodeURIComponent(redirectUri)}&code_challenge=${codeChallenge}&state=${state}`;
    window.location.href = zaloAuthUrl;
}



